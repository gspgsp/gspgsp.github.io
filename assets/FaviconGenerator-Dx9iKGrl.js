import{_ as X,g as F,w as G,e as N,o as D,c as V,b as t,h as p,F as j,m as T,j as y,v as k,t as B,C as E,z as Y}from"./app-BB_BIQV8.js";const Z={__name:"FaviconGenerator",setup(L,{expose:l}){l();const M=F(null),c=F(null),S=F("V"),C=F("#42b883"),i=F("#ffffff"),m=F("square"),U=F(24),z=[{bg:"#42b883",text:"#ffffff",name:"Vue"},{bg:"#35495e",text:"#42b883",name:"Dark"},{bg:"#3eaf7c",text:"#ffffff",name:"Mint"},{bg:"#2c3e50",text:"#42d392",name:"Night"}],I=()=>{if(!M.value)return;const n=M.value.getContext("2d"),d=32;n.clearRect(0,0,d,d),n.fillStyle=C.value,m.value==="circle"?(n.beginPath(),n.arc(d/2,d/2,d/2,0,Math.PI*2),n.fill()):n.fillRect(0,0,d,d),n.fillStyle=i.value,n.font=`bold ${U.value}px Arial, sans-serif`,n.textAlign="center",n.textBaseline="middle",n.fillText(S.value.slice(0,2),d/2,d/2)},P=n=>{const d=document.createElement("canvas"),r=d.getContext("2d");d.width=n,d.height=n,r.fillStyle=C.value,m.value==="circle"?(r.beginPath(),r.arc(n/2,n/2,n/2,0,Math.PI*2),r.fill()):r.fillRect(0,0,n,n),r.fillStyle=i.value;const v=U.value/32*n;return r.font=`bold ${v}px Arial, sans-serif`,r.textAlign="center",r.textBaseline="middle",r.fillText(S.value.slice(0,2),n/2,n/2),d},H=n=>{P(n).toBlob(r=>{const v=URL.createObjectURL(r),a=document.createElement("a");a.href=v,a.download=`favicon-${n}x${n}.png`,a.click(),URL.revokeObjectURL(v)})},A=n=>{const d=n.getContext("2d"),r=n.width,v=n.height,s=d.getImageData(0,0,r,v).data,f=40,_=Math.floor((32*r+31)/32)*4,b=_*v*2,o=new Uint8Array(f+b);let e=0;o[e++]=40,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=r&255,o[e++]=r>>8&255,o[e++]=r>>16&255,o[e++]=r>>24&255;const x=v*2;o[e++]=x&255,o[e++]=x>>8&255,o[e++]=x>>16&255,o[e++]=x>>24&255,o[e++]=1,o[e++]=0,o[e++]=32,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=b&255,o[e++]=b>>8&255,o[e++]=b>>16&255,o[e++]=b>>24&255,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0,o[e++]=0;for(let w=v-1;w>=0;w--){for(let u=0;u<r;u++){const g=(w*r+u)*4;o[e++]=s[g+2],o[e++]=s[g+1],o[e++]=s[g],o[e++]=s[g+3]}for(;e%4!==0;)o[e++]=0}const h=Math.floor((r+31)/32)*4;for(let w=v-1;w>=0;w--){let u=0,g=0;for(let R=0;R<r;R++){const Q=(w*r+R)*4,W=s[Q+3]<128?1:0;u=u<<1|W,g++,g===8&&(o[e++]=u,u=0,g=0)}for(g>0&&(u<<=8-g,o[e++]=u);(e-f-_*v)%h!==0;)o[e++]=0}return o},q=async()=>{const n=[16,32,48],r=n.map(e=>P(e)).map(e=>A(e));let v=6+16*n.length;r.forEach(e=>{v+=e.length});const a=new Uint8Array(v);let s=0;a[s++]=0,a[s++]=0,a[s++]=1,a[s++]=0,a[s++]=n.length,a[s++]=0;let f=6+16*n.length;for(let e=0;e<n.length;e++){const x=n[e],h=r[e];a[s++]=x===256?0:x,a[s++]=x===256?0:x,a[s++]=0,a[s++]=0,a[s++]=1,a[s++]=0,a[s++]=32,a[s++]=0,a[s++]=h.length&255,a[s++]=h.length>>8&255,a[s++]=h.length>>16&255,a[s++]=h.length>>24&255,a[s++]=f&255,a[s++]=f>>8&255,a[s++]=f>>16&255,a[s++]=f>>24&255,f+=h.length}for(const e of r)a.set(e,s),s+=e.length;const _=new Blob([a],{type:"image/x-icon"}),b=URL.createObjectURL(_),o=document.createElement("a");o.href=b,o.download="favicon.ico",o.click(),URL.revokeObjectURL(b)},J=n=>{const d=n.target.files[0];if(!d)return;const r=new FileReader;r.onload=v=>{const a=new Image;a.onload=()=>{const s=M.value.getContext("2d"),f=32;s.clearRect(0,0,f,f),m.value==="circle"&&(s.save(),s.beginPath(),s.arc(f/2,f/2,f/2,0,Math.PI*2),s.clip()),s.drawImage(a,0,0,f,f),m.value==="circle"&&s.restore()},a.src=v.target.result},r.readAsDataURL(d)},K=n=>{C.value=n.bg,i.value=n.text};G([S,C,i,m,U],()=>{I()}),N(()=>{I()});const O={canvas:M,fileInput:c,text:S,bgColor:C,textColor:i,shape:m,fontSize:U,presets:z,generateFavicon:I,generateCanvasAtSize:P,downloadPNG:H,canvasToBMP:A,downloadICO:q,handleImageUpload:J,applyPreset:K,ref:F,watch:G,onMounted:N};return Object.defineProperty(O,"__isScriptSetup",{enumerable:!1,value:!0}),O}},$={class:"favicon-generator"},tt={class:"container"},et={class:"grid"},ot={class:"preview-section"},lt={class:"preview-box"},nt={class:"canvas-wrapper"},st={ref:"canvas",width:"32",height:"32"},at={class:"download-section"},it=["onClick"],rt={class:"control-section"},ct={class:"form-group"},dt={class:"form-group"},vt={class:"color-grid"},ft={class:"form-group"},ut={class:"color-input-group"},gt={class:"form-group"},xt={class:"color-input-group"},pt={class:"form-group"},mt={class:"shape-grid"},bt={class:"form-group"},Ft={class:"form-group"},ht={class:"preset-grid"},wt=["title","onClick"];function Ct(L,l,M,c,S,C){return D(),V("div",$,[t("div",tt,[l[23]||(l[23]=t("div",{class:"header"},[t("h2",null," Favicon 生成器 "),t("p",null,"为你的项目创建精美的 Favicon")],-1)),t("div",et,[t("div",ot,[t("div",lt,[l[9]||(l[9]=t("p",null,"预览 (32x32)",-1)),t("div",nt,[t("canvas",st,null,512)]),l[10]||(l[10]=t("p",{class:"preview-note"},"原始尺寸 32x32 像素，已放大4倍便于查看",-1))]),t("div",at,[l[13]||(l[13]=t("p",{class:"section-title"},"下载 Favicon",-1)),t("button",{class:"btn btn-primary",onClick:c.downloadICO},l[11]||(l[11]=[t("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1),p(" 下载 favicon.ico (推荐) ")])),l[14]||(l[14]=t("div",{class:"divider"},"或下载单独的 PNG 文件",-1)),(D(),V(j,null,T([16,32,64,128],i=>t("button",{key:i,class:"btn btn-secondary",onClick:m=>c.downloadPNG(i)},[l[12]||(l[12]=t("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})],-1)),p(" 下载 "+B(i)+"x"+B(i)+" PNG ",1)],8,it)),64))])]),t("div",rt,[t("div",ct,[l[15]||(l[15]=t("label",null,[t("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M4 7V4h16v3M9 20h6M12 4v16"})]),p(" 文字内容 ")],-1)),y(t("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=i=>c.text=i),maxlength:"2",placeholder:"最多2个字符"},null,512),[[k,c.text]])]),t("div",dt,[t("label",null,"字体大小: "+B(c.fontSize)+"px",1),y(t("input",{type:"range","onUpdate:modelValue":l[1]||(l[1]=i=>c.fontSize=i),min:"12",max:"32"},null,512),[[k,c.fontSize,void 0,{number:!0}]])]),t("div",vt,[t("div",ft,[l[16]||(l[16]=t("label",null,"背景颜色",-1)),t("div",ut,[y(t("input",{type:"color","onUpdate:modelValue":l[2]||(l[2]=i=>c.bgColor=i)},null,512),[[k,c.bgColor]]),y(t("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=i=>c.bgColor=i)},null,512),[[k,c.bgColor]])])]),t("div",gt,[l[17]||(l[17]=t("label",null,"文字颜色",-1)),t("div",xt,[y(t("input",{type:"color","onUpdate:modelValue":l[4]||(l[4]=i=>c.textColor=i)},null,512),[[k,c.textColor]]),y(t("input",{type:"text","onUpdate:modelValue":l[5]||(l[5]=i=>c.textColor=i)},null,512),[[k,c.textColor]])])])]),t("div",pt,[l[20]||(l[20]=t("label",null,"形状",-1)),t("div",mt,[t("button",{class:E(["shape-btn",{active:c.shape==="square"}]),onClick:l[6]||(l[6]=i=>c.shape="square")},l[18]||(l[18]=[t("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"})],-1),p(" 方形 ")]),2),t("button",{class:E(["shape-btn",{active:c.shape==="circle"}]),onClick:l[7]||(l[7]=i=>c.shape="circle")},l[19]||(l[19]=[t("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"})],-1),p(" 圆形 ")]),2)])]),t("div",bt,[l[21]||(l[21]=t("label",null,[t("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"})]),p(" 或上传图片 ")],-1)),t("input",{type:"file",ref:"fileInput",accept:"image/*",onChange:c.handleImageUpload,style:{display:"none"}},null,544),t("button",{class:"upload-btn",onClick:l[8]||(l[8]=i=>L.$refs.fileInput.click())}," 选择图片文件 ")]),t("div",Ft,[l[22]||(l[22]=t("label",null,"快速配色",-1)),t("div",ht,[(D(),V(j,null,T(c.presets,i=>t("button",{key:i.name,class:"preset-btn",style:Y({backgroundColor:i.bg,color:i.text}),title:i.name,onClick:m=>c.applyPreset(i)},B(i.name),13,wt)),64))])])])]),l[24]||(l[24]=t("div",{class:"info-box"},[t("h3",null,[t("span",{class:"icon-circle",style:{width:"1.125rem",height:"1.125rem"}}),p(" 使用说明 ")]),t("ul",null,[t("li",null,[p("• "),t("strong",null,"ICO 格式（推荐）"),p(": 包含 16x16、32x32、48x48 三种尺寸，兼容性最好")]),t("li",null,"• PNG 格式适用于需要高分辨率或特定尺寸的场景")])],-1))])])}const kt=X(Z,[["render",Ct],["__scopeId","data-v-babb77cc"],["__file","FaviconGenerator.vue"]]);export{kt as default};
