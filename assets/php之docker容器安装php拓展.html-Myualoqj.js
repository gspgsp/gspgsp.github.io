import{_ as t,c as e,d as c,o as s}from"./app-CHrRue27.js";const a={};function l(o,d){return s(),e("div",null,d[0]||(d[0]=[c(`<h5 id="php之docker容器安装php拓展" tabindex="-1"><a class="header-anchor" href="#php之docker容器安装php拓展"><span>php之docker容器安装php拓展</span></a></h5><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">关于 docker-php-ext-install:</span>
<span class="line">docker-php-ext-install 是官方 PHP Docker 镜像自带的工具脚本，专门用于安装 PHP 的内置扩展（bcmath、intl、xsl、gd、pdo_mysql 等等）</span>
<span class="line"></span>
<span class="line"># build images (will actually only build if images not yet built or if something changed)</span>
<span class="line">echo &quot;Building Docker images...&quot;</span>
<span class="line">docker compose build nginx</span>
<span class="line">docker compose build --no-cache php //不使用缓存， 但是没用</span>
<span class="line">docker compose build solr</span>
<span class="line"></span>
<span class="line">直接进入php容器里执行:</span>
<span class="line">docker-php-ext-install bcmath //这也是可以安装成功的，但是不能立即生效，所以需要重启docker,但是之前的安装可能丢失</span>
<span class="line"></span>
<span class="line">在容器里查看脚本路径:</span>
<span class="line">root@d7842b65ff32:/var/www# cd /usr/local/bin</span>
<span class="line">root@d7842b65ff32:/usr/local/bin# ls</span>
<span class="line">composer         docker-php-ext-configure  docker-php-ext-install  pear   pecl  phar.phar  php-config  wkhtmltoimage</span>
<span class="line">docker-php-entrypoint  docker-php-ext-enable   docker-php-source   peardev  phar  php    phpize      wkhtmltopdf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h5 id="能使用-docker-php-ext-install-直接安装的拓展有" tabindex="-1"><a class="header-anchor" href="#能使用-docker-php-ext-install-直接安装的拓展有"><span>能使用 <code>docker-php-ext-install</code> 直接安装的拓展有</span></a></h5><table><thead><tr><th>扩展名</th><th>说明</th><th>常见依赖</th></tr></thead><tbody><tr><td><code>bcmath</code></td><td>高精度数学运算</td><td>无</td></tr><tr><td><code>bz2</code></td><td>bzip2 压缩支持</td><td><code>libbz2-dev</code></td></tr><tr><td><code>calendar</code></td><td>日历计算函数</td><td>无</td></tr><tr><td><code>ctype</code></td><td>字符检测函数</td><td>无</td></tr><tr><td><code>curl</code></td><td>cURL 支持</td><td><code>libcurl4-openssl-dev</code></td></tr><tr><td><code>dba</code></td><td>数据库抽象层</td><td>取决于后端</td></tr><tr><td><code>dom</code></td><td>DOM XML 支持</td><td><code>libxml2-dev</code></td></tr><tr><td><code>exif</code></td><td>图片 EXIF 元数据</td><td>无</td></tr><tr><td><code>fileinfo</code></td><td>文件信息支持</td><td>无</td></tr><tr><td><code>ftp</code></td><td>FTP 支持</td><td>无</td></tr><tr><td><code>gd</code></td><td>图像处理</td><td><code>libpng-dev</code>、<code>libjpeg-dev</code>、<code>libfreetype6-dev</code></td></tr><tr><td><code>gettext</code></td><td>GNU gettext</td><td><code>libgettextpo-dev</code></td></tr><tr><td><code>gmp</code></td><td>大整数运算</td><td><code>libgmp-dev</code></td></tr><tr><td><code>iconv</code></td><td>字符集转换</td><td>无</td></tr><tr><td><code>intl</code></td><td>国际化</td><td><code>libicu-dev</code></td></tr><tr><td><code>json</code></td><td>JSON 处理（PHP7.2+ 内置，通常无需装）</td><td>无</td></tr><tr><td><code>ldap</code></td><td>LDAP 访问</td><td><code>libldap2-dev</code></td></tr><tr><td><code>mbstring</code></td><td>多字节字符串</td><td>无</td></tr><tr><td><code>mysqli</code></td><td>MySQLi</td><td>无</td></tr><tr><td><code>pdo</code></td><td>PDO 基础</td><td>无</td></tr><tr><td><code>pdo_mysql</code></td><td>PDO MySQL</td><td>无</td></tr><tr><td><code>pdo_pgsql</code></td><td>PDO PostgreSQL</td><td><code>libpq-dev</code></td></tr><tr><td><code>pdo_sqlite</code></td><td>PDO SQLite</td><td>无</td></tr><tr><td><code>pgsql</code></td><td>PostgreSQL 扩展</td><td><code>libpq-dev</code></td></tr><tr><td><code>phar</code></td><td>Phar 打包</td><td>无</td></tr><tr><td><code>posix</code></td><td>POSIX 支持</td><td>无</td></tr><tr><td><code>session</code></td><td>会话管理</td><td>无</td></tr><tr><td><code>shmop</code></td><td>共享内存</td><td>无</td></tr><tr><td><code>simplexml</code></td><td>SimpleXML</td><td><code>libxml2-dev</code></td></tr><tr><td><code>soap</code></td><td>SOAP 客户端/服务端</td><td><code>libxml2-dev</code></td></tr><tr><td><code>sockets</code></td><td>Socket 支持</td><td>无</td></tr><tr><td><code>sysvmsg</code></td><td>System V 消息队列</td><td>无</td></tr><tr><td><code>sysvsem</code></td><td>System V 信号量</td><td>无</td></tr><tr><td><code>sysvshm</code></td><td>System V 共享内存</td><td>无</td></tr><tr><td><code>tokenizer</code></td><td>PHP 代码解析</td><td>无</td></tr><tr><td><code>xml</code></td><td>XML 基础</td><td><code>libxml2-dev</code></td></tr><tr><td><code>xmlreader</code></td><td>XML 读取</td><td><code>libxml2-dev</code></td></tr><tr><td><code>xmlwriter</code></td><td>XML 写入</td><td><code>libxml2-dev</code></td></tr><tr><td><code>xsl</code></td><td>XSLT 转换</td><td><code>libxslt1-dev</code></td></tr><tr><td><code>zip</code></td><td>ZIP 压缩</td><td><code>libzip-dev</code></td></tr><tr><td><code>opcache</code></td><td>字节码缓存</td><td>无</td></tr></tbody></table><h5 id="需要使用-pecl-install-安装的有" tabindex="-1"><a class="header-anchor" href="#需要使用-pecl-install-安装的有"><span>需要使用 <code>pecl install</code> 安装的有</span></a></h5><table><thead><tr><th>扩展名</th><th>说明</th><th>安装示例</th></tr></thead><tbody><tr><td><code>redis</code></td><td>Redis 客户端</td><td><code>pecl install redis &amp;&amp; docker-php-ext-enable redis</code></td></tr><tr><td><code>xdebug</code></td><td>PHP 调试工具</td><td><code>pecl install xdebug &amp;&amp; docker-php-ext-enable xdebug</code></td></tr><tr><td><code>imagick</code></td><td>ImageMagick 图像处理</td><td>需要先装 <code>libmagickwand-dev</code></td></tr><tr><td><code>mongodb</code></td><td>MongoDB 驱动</td><td><code>pecl install mongodb</code></td></tr><tr><td><code>apcu</code></td><td>APC 用户缓存</td><td><code>pecl install apcu</code></td></tr><tr><td><code>yaml</code></td><td>YAML 解析</td><td>需要 <code>libyaml-dev</code></td></tr><tr><td><code>memcached</code></td><td>Memcached 客户端</td><td>需要 <code>libmemcached-dev</code></td></tr><tr><td><code>amqp</code></td><td>RabbitMQ 客户端</td><td>需要 <code>librabbitmq-dev</code></td></tr><tr><td><code>grpc</code></td><td>gRPC 支持</td><td><code>pecl install grpc</code></td></tr><tr><td><code>uv</code></td><td>libuv 事件循环</td><td><code>pecl install uv</code></td></tr></tbody></table><h5 id="目前-php-镜像dockerfile配置-部分" tabindex="-1"><a class="header-anchor" href="#目前-php-镜像dockerfile配置-部分"><span>目前 php 镜像DockerFile配置(部分)</span></a></h5><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">RUN sed -i &#39;s|deb.debian.org|archive.debian.org|g&#39; /etc/apt/sources.list \\</span>
<span class="line">&amp;&amp; sed -i &#39;/security.debian.org/d&#39; /etc/apt/sources.list \\</span>
<span class="line">&amp;&amp; apt-get update \\</span>
<span class="line">&amp;&amp; apt-get install -y \\</span>
<span class="line">libxslt1-dev \\</span>
<span class="line">libmagickwand-dev --no-install-recommends \\</span>
<span class="line">libzip-dev \\</span>
<span class="line">&amp;&amp; docker-php-ext-install xsl \\</span>
<span class="line">&amp;&amp; docker-php-ext-install bcmath \\</span>
<span class="line">&amp;&amp; pecl install imagick \\</span>
<span class="line">&amp;&amp; docker-php-ext-enable imagick \\</span>
<span class="line">&amp;&amp; docker-php-ext-install zip \\</span>
<span class="line">&amp;&amp; rm -rf /var/lib/apt/lists/*</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="为什么有的扩展必须用-pecl" tabindex="-1"><a class="header-anchor" href="#为什么有的扩展必须用-pecl"><span>为什么有的扩展必须用 <code>pecl</code>？</span></a></h5><ul><li>PHP 官方源码包（<code>php-src</code>）里并没有这些扩展的源码。</li><li>这些扩展是第三方维护的，独立版本更新，不随 PHP 发布绑定。</li><li>Docker 镜像的 <code>/usr/src/php/ext</code> 目录里找不到它们。</li></ul>`,11)]))}const i=t(a,[["render",l],["__file","php之docker容器安装php拓展.html.vue"]]),r=JSON.parse('{"path":"/content/service/docker/php%E4%B9%8Bdocker%E5%AE%B9%E5%99%A8%E5%AE%89%E8%A3%85php%E6%8B%93%E5%B1%95.html","title":"php之docker容器安装php拓展","lang":"en-US","frontmatter":{"sidebar":false,"title":"php之docker容器安装php拓展","head":[["meta",{"name":"title","content":"php之docker容器安装php拓展"}],["meta",{"name":"description","content":"php之docker容器安装php拓展"}],["meta",{"name":"keywords","content":"docker,php"}],["meta",{"property":"og:title","content":"php之docker容器安装php拓展"}],["meta",{"property":"og:description","content":"php之docker容器安装php拓展"}]]},"headers":[],"git":{},"filePathRelative":"content/service/docker/php之docker容器安装php拓展.md"}');export{i as comp,r as data};
