import{_ as s,c as a,d as t,o as e}from"./app-CHrRue27.js";const p={};function l(c,n){return e(),a("div",null,n[0]||(n[0]=[t(`<p>js关于click事件问题:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">&lt;Input</span>
<span class="line">                  v-model=&quot;option.name&quot;</span>
<span class="line">                  placeholder=&quot;Meal option&quot;</span>
<span class="line">                  @focus=&quot;onInputFocus(index)&quot;</span>
<span class="line">                  @blur=&quot;onInputBlur&quot;</span>
<span class="line">                  @keydown.enter=&quot;onKeyDown(index, option.name, $event)&quot;</span>
<span class="line">                  class=&quot;[&amp;_.common-field\\_\\_input]:!h-[2.125rem]&quot;</span>
<span class="line">                /&gt;</span>
<span class="line">&lt;Icon name=&quot;delete&quot; size=&quot;sm&quot; class=&quot;bg-brand-subtlest rounded cursor-pointer absolute -right-6&quot; v-if=&quot;currentInput &gt; 0 &amp;&amp; currentInput === index &amp;&amp; isFocused&quot; @click=&quot;clickInputForm&quot;/&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当input获得焦点的时候, 后面的删除icon会展示，当失去焦点的时候，icon会隐藏，但是当我点击icon的时候，也会触发input失去焦点，然后icon的点击事件没法触发.</p><p>这是一个常见的问题，原因是当点击 <code>delete</code> 图标时，<code>input</code> 的失去焦点事件 (<code>blur</code>) 被触发，导致图标被隐藏，同时图标的点击事件没有机会执行。</p><h5 id="解决方法" tabindex="-1"><a class="header-anchor" href="#解决方法"><span>解决方法</span></a></h5><p>为了防止 <code>blur</code> 事件导致 <code>icon</code> 无法触发点击事件，可以使用 <strong><code>mousedown</code></strong> 事件代替 <code>click</code>，因为 <code>mousedown</code> 事件发生在 <code>blur</code> 事件之前，这样可以先处理删除图标的点击逻辑。</p><hr><h5 id="修改后的代码" tabindex="-1"><a class="header-anchor" href="#修改后的代码"><span>修改后的代码</span></a></h5><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Input</span></span>
<span class="line">  <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>option.name<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Meal option<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">@focus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onInputFocus(index)<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">@blur</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onInputBlur<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">@keydown.enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onKeyDown(index, option.name, $event)<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[&amp;_.common-field\\_\\_input]:!h-[2.125rem]<span class="token punctuation">&quot;</span></span></span>
<span class="line"><span class="token punctuation">/&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Icon</span></span>
<span class="line">  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>delete<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sm<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bg-brand-subtlest rounded cursor-pointer absolute -right-6<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentInput &gt; 0 &amp;&amp; currentInput === index &amp;&amp; isFocused<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">@mousedown</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clickInputForm<span class="token punctuation">&quot;</span></span></span>
<span class="line"><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h5 id="关键点" tabindex="-1"><a class="header-anchor" href="#关键点"><span>关键点</span></a></h5><ol><li><p><strong>使用 <code>@mousedown</code> 代替 <code>@click</code></strong>:</p><ul><li><code>mousedown</code> 事件在 <code>blur</code> 事件之前触发，可以在 <code>input</code> 的失焦之前处理图标的逻辑。</li></ul></li><li><p><strong>保持逻辑一致性</strong>:</p><ul><li>在删除逻辑完成后，<code>blur</code> 逻辑依然有效，不会受到干扰。</li></ul></li></ol><hr><h5 id="补充-更精细的控制-防止失焦逻辑" tabindex="-1"><a class="header-anchor" href="#补充-更精细的控制-防止失焦逻辑"><span>补充：更精细的控制（防止失焦逻辑）</span></a></h5><p>如果希望在 <code>icon</code> 点击时完全阻止 <code>blur</code> 逻辑，可以通过 <code>preventDefault</code> 方法来实现：</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue" data-title="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Input</span></span>
<span class="line">  <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>option.name<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Meal option<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">@focus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onInputFocus(index)<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">@blur</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onInputBlur<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">@keydown.enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onKeyDown(index, option.name, $event)<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[&amp;_.common-field\\_\\_input]:!h-[2.125rem]<span class="token punctuation">&quot;</span></span></span>
<span class="line"><span class="token punctuation">/&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Icon</span></span>
<span class="line">  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>delete<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sm<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bg-brand-subtlest rounded cursor-pointer absolute -right-6<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentInput &gt; 0 &amp;&amp; currentInput === index &amp;&amp; isFocused<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">@mousedown</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preventBlur($event)<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clickInputForm<span class="token punctuation">&quot;</span></span></span>
<span class="line"><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">preventBlur</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 阻止失焦</span></span>
<span class="line">    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">clickInputForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 删除逻辑</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Icon clicked&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h5 id="两种方案对比" tabindex="-1"><a class="header-anchor" href="#两种方案对比"><span>两种方案对比</span></a></h5><ol><li><p><strong>使用 <code>@mousedown</code> 替代 <code>@click</code></strong>：</p><ul><li>简单有效，适合大多数场景。</li><li>无需显式阻止 <code>blur</code> 事件，逻辑清晰。</li></ul></li><li><p><strong>使用 <code>event.preventDefault()</code></strong>：</p><ul><li>提供更精细的控制，适合复杂场景。</li><li>需要手动阻止 <code>blur</code>，可能会引入额外逻辑。</li></ul></li></ol><p>推荐根据实际需求选择合适的方法。目前使用的是第一种方法，当然第二种方法也是可以的。</p>`,21)]))}const u=s(p,[["render",l],["__file","js关于click事件问题.html.vue"]]),i=JSON.parse('{"path":"/content/front/js/js%E5%85%B3%E4%BA%8Eclick%E4%BA%8B%E4%BB%B6%E9%97%AE%E9%A2%98.html","title":"js关于click事件问题","lang":"en-US","frontmatter":{"sidebar":false,"title":"js关于click事件问题","head":[["meta",{"name":"title","content":"js关于click事件问题"}],["meta",{"name":"description","content":"js关于click事件问题"}],["meta",{"name":"keywords","content":"js关于click事件问题"}],["meta",{"property":"og:title","content":"js关于click事件问题"}],["meta",{"property":"og:description","content":"js关于click事件问题"}]]},"headers":[],"git":{},"filePathRelative":"content/front/js/js关于click事件问题.md"}');export{u as comp,i as data};
