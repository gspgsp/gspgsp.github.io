import{_ as p,c as i,a as n,f as t,o as c,r as a}from"./app-BB_BIQV8.js";const o={};function d(r,s){const e=a("DocSearchInPage"),l=a("InArticleAd");return c(),i("div",null,[n(e),n(l),s[0]||(s[0]=t(`<h1 id="memcached-使用手册" tabindex="-1"><a class="header-anchor" href="#memcached-使用手册"><span>Memcached 使用手册</span></a></h1><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>Memcached 是一个高性能的分布式内存对象缓存系统,用于加速动态 Web 应用程序,减轻数据库负载。它通过在内存中缓存数据和对象来减少数据库访问次数。</p><h3 id="核心特性" tabindex="-1"><a class="header-anchor" href="#核心特性"><span>核心特性</span></a></h3><ul><li>基于内存的键值存储系统</li><li>简单的协议设计(文本协议和二进制协议)</li><li>分布式架构支持</li><li>LRU(最近最少使用)淘汰策略</li><li>支持多线程</li><li>高性能,低延迟</li></ul><h2 id="安装与配置" tabindex="-1"><a class="header-anchor" href="#安装与配置"><span>安装与配置</span></a></h2><h3 id="linux-安装" tabindex="-1"><a class="header-anchor" href="#linux-安装"><span>Linux 安装</span></a></h3><h4 id="ubuntu-debian" tabindex="-1"><a class="header-anchor" href="#ubuntu-debian"><span>Ubuntu/Debian</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> update</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> memcached libmemcached-tools</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="centos-rhel" tabindex="-1"><a class="header-anchor" href="#centos-rhel"><span>CentOS/RHEL</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> yum <span class="token function">install</span> memcached libmemcached</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="从源码编译" tabindex="-1"><a class="header-anchor" href="#从源码编译"><span>从源码编译</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">wget</span> http://memcached.org/latest</span>
<span class="line"><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> memcached-1.x.x.tar.gz</span>
<span class="line"><span class="token builtin class-name">cd</span> memcached-1.x.x</span>
<span class="line">./configure <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动-memcached" tabindex="-1"><a class="header-anchor" href="#启动-memcached"><span>启动 Memcached</span></a></h3><h4 id="基本启动" tabindex="-1"><a class="header-anchor" href="#基本启动"><span>基本启动</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">memcached <span class="token parameter variable">-d</span> <span class="token parameter variable">-m</span> <span class="token number">64</span> <span class="token parameter variable">-p</span> <span class="token number">11211</span> <span class="token parameter variable">-u</span> memcache <span class="token parameter variable">-l</span> <span class="token number">127.0</span>.0.1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="参数说明" tabindex="-1"><a class="header-anchor" href="#参数说明"><span>参数说明</span></a></h4><ul><li><code>-d</code>: 以守护进程方式运行</li><li><code>-m</code>: 分配的内存大小(MB),默认 64MB</li><li><code>-p</code>: 监听端口,默认 11211</li><li><code>-u</code>: 运行用户</li><li><code>-l</code>: 监听地址</li><li><code>-c</code>: 最大并发连接数,默认 1024</li><li><code>-t</code>: 线程数,默认 4</li><li><code>-P</code>: 保存 PID 的文件路径</li></ul><h4 id="配置文件方式-systemd" tabindex="-1"><a class="header-anchor" href="#配置文件方式-systemd"><span>配置文件方式(systemd)</span></a></h4><p>编辑 <code>/etc/memcached.conf</code>:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 内存限制</span>
<span class="line">-m 512</span>
<span class="line"></span>
<span class="line"># 监听端口</span>
<span class="line">-p 11211</span>
<span class="line"></span>
<span class="line"># 监听地址</span>
<span class="line">-l 127.0.0.1</span>
<span class="line"></span>
<span class="line"># 最大连接数</span>
<span class="line">-c 2048</span>
<span class="line"></span>
<span class="line"># 线程数</span>
<span class="line">-t 8</span>
<span class="line"></span>
<span class="line"># 用户</span>
<span class="line">-u memcache</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动服务:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> systemctl start memcached</span>
<span class="line"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> memcached</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="基本操作" tabindex="-1"><a class="header-anchor" href="#基本操作"><span>基本操作</span></a></h2><h3 id="使用-telnet-连接测试" tabindex="-1"><a class="header-anchor" href="#使用-telnet-连接测试"><span>使用 telnet 连接测试</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">telnet localhost <span class="token number">11211</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="存储命令" tabindex="-1"><a class="header-anchor" href="#存储命令"><span>存储命令</span></a></h3><h4 id="set-设置键值" tabindex="-1"><a class="header-anchor" href="#set-设置键值"><span>set - 设置键值</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">set key flags exptime bytes</span>
<span class="line">value</span>
<span class="line"></span>
<span class="line"># 示例</span>
<span class="line">set mykey 0 3600 5</span>
<span class="line">hello</span>
<span class="line">STORED</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>参数说明:</p><ul><li><code>key</code>: 键名</li><li><code>flags</code>: 标志位(客户端用于标识数据类型)</li><li><code>exptime</code>: 过期时间(秒),0 表示永不过期</li><li><code>bytes</code>: 数据字节数</li><li><code>value</code>: 实际数据</li></ul><h4 id="add-仅当键不存在时添加" tabindex="-1"><a class="header-anchor" href="#add-仅当键不存在时添加"><span>add - 仅当键不存在时添加</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">add newkey 0 3600 5</span>
<span class="line">world</span>
<span class="line">STORED</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="replace-仅当键存在时替换" tabindex="-1"><a class="header-anchor" href="#replace-仅当键存在时替换"><span>replace - 仅当键存在时替换</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">replace mykey 0 3600 7</span>
<span class="line">goodbye</span>
<span class="line">STORED</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="append-追加数据到现有值" tabindex="-1"><a class="header-anchor" href="#append-追加数据到现有值"><span>append - 追加数据到现有值</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">append mykey 0 3600 6</span>
<span class="line"> world</span>
<span class="line">STORED</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="prepend-前置数据到现有值" tabindex="-1"><a class="header-anchor" href="#prepend-前置数据到现有值"><span>prepend - 前置数据到现有值</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">prepend mykey 0 3600 6</span>
<span class="line">hello </span>
<span class="line">STORED</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="读取命令" tabindex="-1"><a class="header-anchor" href="#读取命令"><span>读取命令</span></a></h3><h4 id="get-获取单个或多个键" tabindex="-1"><a class="header-anchor" href="#get-获取单个或多个键"><span>get - 获取单个或多个键</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">get mykey</span>
<span class="line">VALUE mykey 0 5</span>
<span class="line">hello</span>
<span class="line">END</span>
<span class="line"></span>
<span class="line">get key1 key2 key3</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="gets-获取带-cas-标识的值" tabindex="-1"><a class="header-anchor" href="#gets-获取带-cas-标识的值"><span>gets - 获取带 CAS 标识的值</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">gets mykey</span>
<span class="line">VALUE mykey 0 5 123</span>
<span class="line">hello</span>
<span class="line">END</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除命令" tabindex="-1"><a class="header-anchor" href="#删除命令"><span>删除命令</span></a></h3><h4 id="delete-删除键" tabindex="-1"><a class="header-anchor" href="#delete-删除键"><span>delete - 删除键</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">delete mykey</span>
<span class="line">DELETED</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="计数器操作" tabindex="-1"><a class="header-anchor" href="#计数器操作"><span>计数器操作</span></a></h3><h4 id="incr-增加数值" tabindex="-1"><a class="header-anchor" href="#incr-增加数值"><span>incr - 增加数值</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">set counter 0 0 1</span>
<span class="line">5</span>
<span class="line">STORED</span>
<span class="line"></span>
<span class="line">incr counter 3</span>
<span class="line">8</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="decr-减少数值" tabindex="-1"><a class="header-anchor" href="#decr-减少数值"><span>decr - 减少数值</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">decr counter 2</span>
<span class="line">6</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cas-compare-and-swap-操作" tabindex="-1"><a class="header-anchor" href="#cas-compare-and-swap-操作"><span>CAS(Compare And Swap)操作</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"># 获取 CAS 值</span>
<span class="line">gets mykey</span>
<span class="line">VALUE mykey 0 5 123</span>
<span class="line">hello</span>
<span class="line">END</span>
<span class="line"></span>
<span class="line"># 使用 CAS 更新</span>
<span class="line">cas mykey 0 3600 5 123</span>
<span class="line">world</span>
<span class="line">STORED</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="统计命令" tabindex="-1"><a class="header-anchor" href="#统计命令"><span>统计命令</span></a></h3><h4 id="stats-服务器统计信息" tabindex="-1"><a class="header-anchor" href="#stats-服务器统计信息"><span>stats - 服务器统计信息</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">stats</span>
<span class="line">STAT pid 1234</span>
<span class="line">STAT uptime 3600</span>
<span class="line">STAT time 1234567890</span>
<span class="line">STAT version 1.6.21</span>
<span class="line">...</span>
<span class="line">END</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="stats-items-项目统计" tabindex="-1"><a class="header-anchor" href="#stats-items-项目统计"><span>stats items - 项目统计</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">stats items</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="stats-slabs-内存分配统计" tabindex="-1"><a class="header-anchor" href="#stats-slabs-内存分配统计"><span>stats slabs - 内存分配统计</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">stats slabs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="stats-sizes-键大小分布" tabindex="-1"><a class="header-anchor" href="#stats-sizes-键大小分布"><span>stats sizes - 键大小分布</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">stats sizes</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="其他命令" tabindex="-1"><a class="header-anchor" href="#其他命令"><span>其他命令</span></a></h3><h4 id="flush-all-清空所有数据" tabindex="-1"><a class="header-anchor" href="#flush-all-清空所有数据"><span>flush_all - 清空所有数据</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">flush_all</span>
<span class="line">OK</span>
<span class="line"></span>
<span class="line"># 延迟清空(秒)</span>
<span class="line">flush_all 60</span>
<span class="line">OK</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="version-查看版本" tabindex="-1"><a class="header-anchor" href="#version-查看版本"><span>version - 查看版本</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">version</span>
<span class="line">VERSION 1.6.21</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="quit-断开连接" tabindex="-1"><a class="header-anchor" href="#quit-断开连接"><span>quit - 断开连接</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">quit</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="高级特性" tabindex="-1"><a class="header-anchor" href="#高级特性"><span>高级特性</span></a></h2><h3 id="二进制协议" tabindex="-1"><a class="header-anchor" href="#二进制协议"><span>二进制协议</span></a></h3><p>Memcached 支持更高效的二进制协议,相比文本协议具有以下优势:</p><ul><li>更少的解析开销</li><li>更紧凑的数据格式</li><li>支持更多数据类型</li><li>内置 CAS 支持</li></ul><p>大多数客户端库默认使用二进制协议。</p><h3 id="sasl-认证" tabindex="-1"><a class="header-anchor" href="#sasl-认证"><span>SASL 认证</span></a></h3><p>启用 SASL 认证增强安全性:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">memcached <span class="token parameter variable">-S</span> <span class="token parameter variable">-vv</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>配置用户名和密码:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;user:password&quot;</span> <span class="token operator">&gt;</span> /etc/sasldb2</span>
<span class="line">saslpasswd2 <span class="token parameter variable">-a</span> memcached <span class="token parameter variable">-c</span> username</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="tls-ssl-支持" tabindex="-1"><a class="header-anchor" href="#tls-ssl-支持"><span>TLS/SSL 支持</span></a></h3><p>Memcached 1.5.13+ 支持 TLS 加密:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">memcached <span class="token parameter variable">-Z</span> <span class="token parameter variable">-o</span> <span class="token assign-left variable">ssl_chain_cert</span><span class="token operator">=</span>/path/to/cert.pem <span class="token punctuation">\\</span></span>
<span class="line">          <span class="token parameter variable">-o</span> <span class="token assign-left variable">ssl_key</span><span class="token operator">=</span>/path/to/key.pem</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="扩展存储引擎" tabindex="-1"><a class="header-anchor" href="#扩展存储引擎"><span>扩展存储引擎</span></a></h3><p>Memcached 支持外部存储引擎,可以将不常用数据存储到磁盘:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">memcached <span class="token parameter variable">-o</span> <span class="token assign-left variable">ext_path</span><span class="token operator">=</span>/path/to/storage:1G</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="编程语言客户端" tabindex="-1"><a class="header-anchor" href="#编程语言客户端"><span>编程语言客户端</span></a></h2><h3 id="python" tabindex="-1"><a class="header-anchor" href="#python"><span>Python</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> memcache</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 连接</span></span>
<span class="line">mc <span class="token operator">=</span> memcache<span class="token punctuation">.</span>Client<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;127.0.0.1:11211&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 设置</span></span>
<span class="line">mc<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> time<span class="token operator">=</span><span class="token number">3600</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 获取</span></span>
<span class="line">value <span class="token operator">=</span> mc<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 删除</span></span>
<span class="line">mc<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 批量操作</span></span>
<span class="line">mc<span class="token punctuation">.</span>set_multi<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;key1&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;value1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;key2&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;value2&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">values <span class="token operator">=</span> mc<span class="token punctuation">.</span>get_multi<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;key1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;key2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="php" tabindex="-1"><a class="header-anchor" href="#php"><span>PHP</span></a></h3><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span></span>
<span class="line"><span class="token variable">$memcache</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Memcached</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$memcache</span><span class="token operator">-&gt;</span><span class="token function">addServer</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;127.0.0.1&#39;</span><span class="token punctuation">,</span> <span class="token number">11211</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 设置</span></span>
<span class="line"><span class="token variable">$memcache</span><span class="token operator">-&gt;</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;key&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token number">3600</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 获取</span></span>
<span class="line"><span class="token variable">$value</span> <span class="token operator">=</span> <span class="token variable">$memcache</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;key&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 删除</span></span>
<span class="line"><span class="token variable">$memcache</span><span class="token operator">-&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;key&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// CAS 操作</span></span>
<span class="line"><span class="token variable">$cas</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$memcache</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;key&#39;</span><span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token variable">$cas</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$memcache</span><span class="token operator">-&gt;</span><span class="token function">cas</span><span class="token punctuation">(</span><span class="token variable">$cas</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;key&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;new_value&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token delimiter important">?&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="java" tabindex="-1"><a class="header-anchor" href="#java"><span>Java</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">net<span class="token punctuation">.</span>spy<span class="token punctuation">.</span>memcached<span class="token punctuation">.</span></span><span class="token class-name">MemcachedClient</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 连接</span></span>
<span class="line"><span class="token class-name">MemcachedClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MemcachedClient</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">11211</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 设置</span></span>
<span class="line">client<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token number">3600</span><span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 获取</span></span>
<span class="line"><span class="token class-name">Object</span> value <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 删除</span></span>
<span class="line">client<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 关闭</span></span>
<span class="line">client<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="node-js" tabindex="-1"><a class="header-anchor" href="#node-js"><span>Node.js</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> Memcached <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;memcached&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> memcached <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Memcached</span><span class="token punctuation">(</span><span class="token string">&#39;127.0.0.1:11211&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 设置</span></span>
<span class="line">memcached<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token number">3600</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 获取</span></span>
<span class="line">memcached<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 删除</span></span>
<span class="line">memcached<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="go" tabindex="-1"><a class="header-anchor" href="#go"><span>Go</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/bradfitz/gomemcache/memcache&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 连接</span></span>
<span class="line">mc <span class="token operator">:=</span> memcache<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1:11211&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 设置</span></span>
<span class="line">mc<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>memcache<span class="token punctuation">.</span>Item<span class="token punctuation">{</span></span>
<span class="line">    Key<span class="token punctuation">:</span>   <span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    Value<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    Expiration<span class="token punctuation">:</span> <span class="token number">3600</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 获取</span></span>
<span class="line">item<span class="token punctuation">,</span> err <span class="token operator">:=</span> mc<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 删除</span></span>
<span class="line">mc<span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="性能优化" tabindex="-1"><a class="header-anchor" href="#性能优化"><span>性能优化</span></a></h2><h3 id="内存分配优化" tabindex="-1"><a class="header-anchor" href="#内存分配优化"><span>内存分配优化</span></a></h3><h4 id="调整-chunk-大小" tabindex="-1"><a class="header-anchor" href="#调整-chunk-大小"><span>调整 chunk 大小</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">memcached <span class="token parameter variable">-f</span> <span class="token number">1.25</span>  <span class="token comment"># 增长因子,默认 1.25</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="预分配内存" tabindex="-1"><a class="header-anchor" href="#预分配内存"><span>预分配内存</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">memcached <span class="token parameter variable">-L</span>  <span class="token comment"># 使用大内存页</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="连接池配置" tabindex="-1"><a class="header-anchor" href="#连接池配置"><span>连接池配置</span></a></h3><p>客户端应使用连接池以减少连接开销:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token comment"># Python 示例</span></span>
<span class="line">mc <span class="token operator">=</span> memcache<span class="token punctuation">.</span>Client<span class="token punctuation">(</span></span>
<span class="line">    <span class="token punctuation">[</span><span class="token string">&#39;127.0.0.1:11211&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    debug<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">    socket_timeout<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="line">    server_max_value_length<span class="token operator">=</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="键设计最佳实践" tabindex="-1"><a class="header-anchor" href="#键设计最佳实践"><span>键设计最佳实践</span></a></h3><ol><li>使用简短但有意义的键名</li><li>使用命名空间前缀(如 <code>user:1234</code>)</li><li>避免使用过长的键(最大 250 字节)</li><li>键名使用 ASCII 字符,避免特殊字符</li></ol><h3 id="数据压缩" tabindex="-1"><a class="header-anchor" href="#数据压缩"><span>数据压缩</span></a></h3><p>对于大数据,客户端可以自动压缩:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line">mc<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">&#39;large_data&#39;</span><span class="token punctuation">,</span> large_object<span class="token punctuation">,</span> compress_threshold<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="分布式策略" tabindex="-1"><a class="header-anchor" href="#分布式策略"><span>分布式策略</span></a></h3><h4 id="一致性哈希" tabindex="-1"><a class="header-anchor" href="#一致性哈希"><span>一致性哈希</span></a></h4><p>使用一致性哈希算法分布数据到多个节点:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">from</span> memcache <span class="token keyword">import</span> Client</span>
<span class="line"></span>
<span class="line">servers <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&#39;192.168.1.1:11211&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;192.168.1.2:11211&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;192.168.1.3:11211&#39;</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">mc <span class="token operator">=</span> Client<span class="token punctuation">(</span>servers<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="监控与维护" tabindex="-1"><a class="header-anchor" href="#监控与维护"><span>监控与维护</span></a></h2><h3 id="监控指标" tabindex="-1"><a class="header-anchor" href="#监控指标"><span>监控指标</span></a></h3><h4 id="关键指标" tabindex="-1"><a class="header-anchor" href="#关键指标"><span>关键指标</span></a></h4><ul><li><code>cmd_get</code>: GET 命令总数</li><li><code>cmd_set</code>: SET 命令总数</li><li><code>get_hits</code>: 命中次数</li><li><code>get_misses</code>: 未命中次数</li><li><code>evictions</code>: 驱逐数量</li><li><code>bytes</code>: 当前存储字节数</li><li><code>curr_connections</code>: 当前连接数</li><li><code>total_connections</code>: 总连接数</li></ul><h4 id="计算缓存命中率" tabindex="-1"><a class="header-anchor" href="#计算缓存命中率"><span>计算缓存命中率</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">命中率 = get_hits / (get_hits + get_misses) * 100%</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="监控工具" tabindex="-1"><a class="header-anchor" href="#监控工具"><span>监控工具</span></a></h3><h4 id="memcached-tool" tabindex="-1"><a class="header-anchor" href="#memcached-tool"><span>memcached-tool</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">memcached-tool localhost:11211 stats</span>
<span class="line">memcached-tool localhost:11211 display</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="使用脚本监控" tabindex="-1"><a class="header-anchor" href="#使用脚本监控"><span>使用脚本监控</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token shebang important">#!/bin/bash</span></span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;stats&quot;</span> <span class="token operator">|</span> <span class="token function">nc</span> localhost <span class="token number">11211</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token string">&quot;cmd_get|get_hits|get_misses&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="日志分析" tabindex="-1"><a class="header-anchor" href="#日志分析"><span>日志分析</span></a></h3><p>启用详细日志:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">memcached <span class="token parameter variable">-vv</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="常见问题排查" tabindex="-1"><a class="header-anchor" href="#常见问题排查"><span>常见问题排查</span></a></h3><h4 id="内存不足" tabindex="-1"><a class="header-anchor" href="#内存不足"><span>内存不足</span></a></h4><ul><li>检查 <code>evictions</code> 指标</li><li>增加内存分配:<code>-m</code> 参数</li><li>优化数据过期策略</li></ul><h4 id="连接数过多" tabindex="-1"><a class="header-anchor" href="#连接数过多"><span>连接数过多</span></a></h4><ul><li>检查 <code>curr_connections</code></li><li>增加最大连接数:<code>-c</code> 参数</li><li>检查客户端连接池配置</li></ul><h4 id="性能下降" tabindex="-1"><a class="header-anchor" href="#性能下降"><span>性能下降</span></a></h4><ul><li>检查 CPU 使用率</li><li>增加线程数:<code>-t</code> 参数</li><li>优化网络配置</li></ul><h2 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践"><span>最佳实践</span></a></h2><h3 id="缓存策略" tabindex="-1"><a class="header-anchor" href="#缓存策略"><span>缓存策略</span></a></h3><h4 id="cache-aside-旁路缓存" tabindex="-1"><a class="header-anchor" href="#cache-aside-旁路缓存"><span>Cache-Aside(旁路缓存)</span></a></h4><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">get_user</span><span class="token punctuation">(</span>user_id<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># 先查缓存</span></span>
<span class="line">    user <span class="token operator">=</span> mc<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;user:</span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> user <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># 缓存未命中,查数据库</span></span>
<span class="line">        user <span class="token operator">=</span> db<span class="token punctuation">.</span>query<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;SELECT * FROM users WHERE id=</span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># 写入缓存</span></span>
<span class="line">        mc<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;user:</span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">,</span> user<span class="token punctuation">,</span> <span class="token number">3600</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> user</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="write-through-写穿" tabindex="-1"><a class="header-anchor" href="#write-through-写穿"><span>Write-Through(写穿)</span></a></h4><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">update_user</span><span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># 先更新数据库</span></span>
<span class="line">    db<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;UPDATE users SET ... WHERE id=</span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># 同步更新缓存</span></span>
<span class="line">    mc<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;user:</span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token number">3600</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="write-behind-写回" tabindex="-1"><a class="header-anchor" href="#write-behind-写回"><span>Write-Behind(写回)</span></a></h4><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">update_user</span><span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># 先更新缓存</span></span>
<span class="line">    mc<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;user:</span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token number">3600</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># 异步更新数据库</span></span>
<span class="line">    queue<span class="token punctuation">.</span>add_task<span class="token punctuation">(</span><span class="token string">&#39;update_db&#39;</span><span class="token punctuation">,</span> user_id<span class="token punctuation">,</span> data<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="过期时间设置" tabindex="-1"><a class="header-anchor" href="#过期时间设置"><span>过期时间设置</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token comment"># 短期数据(会话)</span></span>
<span class="line">mc<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">&#39;session:123&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token number">1800</span><span class="token punctuation">)</span>  <span class="token comment"># 30分钟</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 中期数据(用户信息)</span></span>
<span class="line">mc<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">&#39;user:456&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token number">86400</span><span class="token punctuation">)</span>  <span class="token comment"># 24小时</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 长期数据(配置)</span></span>
<span class="line">mc<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">&#39;config:app&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token number">604800</span><span class="token punctuation">)</span>  <span class="token comment"># 7天</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="缓存预热" tabindex="-1"><a class="header-anchor" href="#缓存预热"><span>缓存预热</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">warmup_cache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># 预加载热点数据</span></span>
<span class="line">    hot_users <span class="token operator">=</span> db<span class="token punctuation">.</span>query<span class="token punctuation">(</span><span class="token string">&#39;SELECT * FROM users WHERE is_hot=1&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">for</span> user <span class="token keyword">in</span> hot_users<span class="token punctuation">:</span></span>
<span class="line">        mc<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;user:</span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">,</span> user<span class="token punctuation">,</span> <span class="token number">3600</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="防止缓存雪崩" tabindex="-1"><a class="header-anchor" href="#防止缓存雪崩"><span>防止缓存雪崩</span></a></h3><h4 id="设置随机过期时间" tabindex="-1"><a class="header-anchor" href="#设置随机过期时间"><span>设置随机过期时间</span></a></h4><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> random</span>
<span class="line"></span>
<span class="line">expire_time <span class="token operator">=</span> <span class="token number">3600</span> <span class="token operator">+</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span></span>
<span class="line">mc<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">,</span> value<span class="token punctuation">,</span> expire_time<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="使用互斥锁" tabindex="-1"><a class="header-anchor" href="#使用互斥锁"><span>使用互斥锁</span></a></h4><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">get_data_with_lock</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    data <span class="token operator">=</span> mc<span class="token punctuation">.</span>get<span class="token punctuation">(</span>key<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> data <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span></span>
<span class="line">        lock_key <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&#39;lock:</span><span class="token interpolation"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span></span>
<span class="line">        <span class="token keyword">if</span> mc<span class="token punctuation">.</span>add<span class="token punctuation">(</span>lock_key<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 获取锁</span></span>
<span class="line">            <span class="token keyword">try</span><span class="token punctuation">:</span></span>
<span class="line">                data <span class="token operator">=</span> db<span class="token punctuation">.</span>query<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span></span>
<span class="line">                mc<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token number">3600</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">finally</span><span class="token punctuation">:</span></span>
<span class="line">                mc<span class="token punctuation">.</span>delete<span class="token punctuation">(</span>lock_key<span class="token punctuation">)</span>  <span class="token comment"># 释放锁</span></span>
<span class="line">        <span class="token keyword">else</span><span class="token punctuation">:</span></span>
<span class="line">            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span> get_data_with_lock<span class="token punctuation">(</span>key<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> data</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="防止缓存穿透" tabindex="-1"><a class="header-anchor" href="#防止缓存穿透"><span>防止缓存穿透</span></a></h3><h4 id="缓存空值" tabindex="-1"><a class="header-anchor" href="#缓存空值"><span>缓存空值</span></a></h4><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line">user <span class="token operator">=</span> db<span class="token punctuation">.</span>query<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;SELECT * FROM users WHERE id=</span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">if</span> user <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span></span>
<span class="line">    mc<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;user:</span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">,</span> <span class="token string">&#39;NULL&#39;</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>  <span class="token comment"># 缓存5分钟</span></span>
<span class="line"><span class="token keyword">else</span><span class="token punctuation">:</span></span>
<span class="line">    mc<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;user:</span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">,</span> user<span class="token punctuation">,</span> <span class="token number">3600</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="布隆过滤器" tabindex="-1"><a class="header-anchor" href="#布隆过滤器"><span>布隆过滤器</span></a></h4><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">from</span> pybloom <span class="token keyword">import</span> BloomFilter</span>
<span class="line"></span>
<span class="line">bf <span class="token operator">=</span> BloomFilter<span class="token punctuation">(</span>capacity<span class="token operator">=</span><span class="token number">1000000</span><span class="token punctuation">,</span> error_rate<span class="token operator">=</span><span class="token number">0.001</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 初始化</span></span>
<span class="line"><span class="token keyword">for</span> user_id <span class="token keyword">in</span> all_user_ids<span class="token punctuation">:</span></span>
<span class="line">    bf<span class="token punctuation">.</span>add<span class="token punctuation">(</span>user_id<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查询</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">get_user</span><span class="token punctuation">(</span>user_id<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">if</span> user_id <span class="token keyword">not</span> <span class="token keyword">in</span> bf<span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token boolean">None</span>  <span class="token comment"># 一定不存在</span></span>
<span class="line">    <span class="token keyword">return</span> mc<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&#39;user:</span><span class="token interpolation"><span class="token punctuation">{</span>user_id<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span><span class="token punctuation">)</span> <span class="token keyword">or</span> db<span class="token punctuation">.</span>query<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安全建议" tabindex="-1"><a class="header-anchor" href="#安全建议"><span>安全建议</span></a></h3><ol><li>不要在公网直接暴露 Memcached</li><li>使用防火墙限制访问</li><li>启用 SASL 认证</li><li>使用 TLS 加密传输</li><li>定期更新到最新版本</li><li>监控异常访问模式</li></ol><h3 id="容量规划" tabindex="-1"><a class="header-anchor" href="#容量规划"><span>容量规划</span></a></h3><p>计算所需内存:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">总内存 = 平均对象大小 × 对象数量 × 1.3(开销因子)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>示例:</p><ul><li>100万个对象</li><li>平均每个 1KB</li><li>所需内存 ≈ 1GB × 1.3 = 1.3GB</li></ul><h2 id="附录" tabindex="-1"><a class="header-anchor" href="#附录"><span>附录</span></a></h2><h3 id="错误代码" tabindex="-1"><a class="header-anchor" href="#错误代码"><span>错误代码</span></a></h3><ul><li><code>ERROR</code>: 一般错误</li><li><code>CLIENT_ERROR</code>: 客户端错误</li><li><code>SERVER_ERROR</code>: 服务器错误</li><li><code>NOT_FOUND</code>: 键不存在</li><li><code>EXISTS</code>: 键已存在(add 命令)</li><li><code>NOT_STORED</code>: 未存储(如 replace 不存在的键)</li></ul><h3 id="参考资源" tabindex="-1"><a class="header-anchor" href="#参考资源"><span>参考资源</span></a></h3><ul><li>官方网站: https://memcached.org/</li><li>GitHub: https://github.com/memcached/memcached</li><li>官方文档: https://github.com/memcached/memcached/wiki</li></ul><h3 id="版本历史" tabindex="-1"><a class="header-anchor" href="#版本历史"><span>版本历史</span></a></h3><ul><li>1.6.x: 当前稳定版,支持 TLS、外部存储等</li><li>1.5.x: 添加 TLS 支持</li><li>1.4.x: 长期稳定版</li></ul><hr><p>最后更新时间: 2025年1月</p>`,174))])}const m=p(o,[["render",d],["__file","index.html.vue"]]),h=JSON.parse('{"path":"/books/memcached-handbook/","title":"Memcached 使用手册","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[{"level":3,"title":"核心特性","slug":"核心特性","link":"#核心特性","children":[]}]},{"level":2,"title":"安装与配置","slug":"安装与配置","link":"#安装与配置","children":[{"level":3,"title":"Linux 安装","slug":"linux-安装","link":"#linux-安装","children":[]},{"level":3,"title":"启动 Memcached","slug":"启动-memcached","link":"#启动-memcached","children":[]}]},{"level":2,"title":"基本操作","slug":"基本操作","link":"#基本操作","children":[{"level":3,"title":"使用 telnet 连接测试","slug":"使用-telnet-连接测试","link":"#使用-telnet-连接测试","children":[]},{"level":3,"title":"存储命令","slug":"存储命令","link":"#存储命令","children":[]},{"level":3,"title":"读取命令","slug":"读取命令","link":"#读取命令","children":[]},{"level":3,"title":"删除命令","slug":"删除命令","link":"#删除命令","children":[]},{"level":3,"title":"计数器操作","slug":"计数器操作","link":"#计数器操作","children":[]},{"level":3,"title":"CAS(Compare And Swap)操作","slug":"cas-compare-and-swap-操作","link":"#cas-compare-and-swap-操作","children":[]},{"level":3,"title":"统计命令","slug":"统计命令","link":"#统计命令","children":[]},{"level":3,"title":"其他命令","slug":"其他命令","link":"#其他命令","children":[]}]},{"level":2,"title":"高级特性","slug":"高级特性","link":"#高级特性","children":[{"level":3,"title":"二进制协议","slug":"二进制协议","link":"#二进制协议","children":[]},{"level":3,"title":"SASL 认证","slug":"sasl-认证","link":"#sasl-认证","children":[]},{"level":3,"title":"TLS/SSL 支持","slug":"tls-ssl-支持","link":"#tls-ssl-支持","children":[]},{"level":3,"title":"扩展存储引擎","slug":"扩展存储引擎","link":"#扩展存储引擎","children":[]}]},{"level":2,"title":"编程语言客户端","slug":"编程语言客户端","link":"#编程语言客户端","children":[{"level":3,"title":"Python","slug":"python","link":"#python","children":[]},{"level":3,"title":"PHP","slug":"php","link":"#php","children":[]},{"level":3,"title":"Java","slug":"java","link":"#java","children":[]},{"level":3,"title":"Node.js","slug":"node-js","link":"#node-js","children":[]},{"level":3,"title":"Go","slug":"go","link":"#go","children":[]}]},{"level":2,"title":"性能优化","slug":"性能优化","link":"#性能优化","children":[{"level":3,"title":"内存分配优化","slug":"内存分配优化","link":"#内存分配优化","children":[]},{"level":3,"title":"连接池配置","slug":"连接池配置","link":"#连接池配置","children":[]},{"level":3,"title":"键设计最佳实践","slug":"键设计最佳实践","link":"#键设计最佳实践","children":[]},{"level":3,"title":"数据压缩","slug":"数据压缩","link":"#数据压缩","children":[]},{"level":3,"title":"分布式策略","slug":"分布式策略","link":"#分布式策略","children":[]}]},{"level":2,"title":"监控与维护","slug":"监控与维护","link":"#监控与维护","children":[{"level":3,"title":"监控指标","slug":"监控指标","link":"#监控指标","children":[]},{"level":3,"title":"监控工具","slug":"监控工具","link":"#监控工具","children":[]},{"level":3,"title":"日志分析","slug":"日志分析","link":"#日志分析","children":[]},{"level":3,"title":"常见问题排查","slug":"常见问题排查","link":"#常见问题排查","children":[]}]},{"level":2,"title":"最佳实践","slug":"最佳实践","link":"#最佳实践","children":[{"level":3,"title":"缓存策略","slug":"缓存策略","link":"#缓存策略","children":[]},{"level":3,"title":"过期时间设置","slug":"过期时间设置","link":"#过期时间设置","children":[]},{"level":3,"title":"缓存预热","slug":"缓存预热","link":"#缓存预热","children":[]},{"level":3,"title":"防止缓存雪崩","slug":"防止缓存雪崩","link":"#防止缓存雪崩","children":[]},{"level":3,"title":"防止缓存穿透","slug":"防止缓存穿透","link":"#防止缓存穿透","children":[]},{"level":3,"title":"安全建议","slug":"安全建议","link":"#安全建议","children":[]},{"level":3,"title":"容量规划","slug":"容量规划","link":"#容量规划","children":[]}]},{"level":2,"title":"附录","slug":"附录","link":"#附录","children":[{"level":3,"title":"错误代码","slug":"错误代码","link":"#错误代码","children":[]},{"level":3,"title":"参考资源","slug":"参考资源","link":"#参考资源","children":[]},{"level":3,"title":"版本历史","slug":"版本历史","link":"#版本历史","children":[]}]}],"git":{},"filePathRelative":"books/memcached-handbook/index.md"}');export{m as comp,h as data};
