import{_ as l,c as t,a as n,f as i,o as c,r as a}from"./app-BB_BIQV8.js";const o={};function r(d,s){const e=a("DocSearchInPage"),p=a("InArticleAd");return c(),t("div",null,[n(e),n(p),s[0]||(s[0]=i(`<h1 id="mysql-使用手册" tabindex="-1"><a class="header-anchor" href="#mysql-使用手册"><span>MySQL 使用手册</span></a></h1><h2 id="_1-mysql-基础概念" tabindex="-1"><a class="header-anchor" href="#_1-mysql-基础概念"><span>1. MySQL 基础概念</span></a></h2><h3 id="_1-1-什么是-mysql" tabindex="-1"><a class="header-anchor" href="#_1-1-什么是-mysql"><span>1.1 什么是 MySQL</span></a></h3><p>MySQL 是一个开源的关系型数据库管理系统（RDBMS），使用 SQL 作为查询语言。具有体积小、速度快、成本低、开源等特点，是互联网应用中最常用的数据库。</p><h3 id="_1-2-mysql-的特点" tabindex="-1"><a class="header-anchor" href="#_1-2-mysql-的特点"><span>1.2 MySQL 的特点</span></a></h3><ul><li>开源免费</li><li>跨平台</li><li>可靠性强</li><li>支持事务处理</li><li>查询速度快</li><li>安全性高</li></ul><hr><h2 id="_2-mysql-安装与配置" tabindex="-1"><a class="header-anchor" href="#_2-mysql-安装与配置"><span>2. MySQL 安装与配置</span></a></h2><h3 id="_2-1-windows-安装" tabindex="-1"><a class="header-anchor" href="#_2-1-windows-安装"><span>2.1 Windows 安装</span></a></h3><ol><li>下载 MySQL 安装程序</li><li>运行安装向导</li><li>选择安装类型（开发者默认、服务器）</li><li>配置 MySQL 服务端口和字符集</li><li>初始化数据库和创建管理员账户</li></ol><h3 id="_2-2-linux-安装" tabindex="-1"><a class="header-anchor" href="#_2-2-linux-安装"><span>2.2 Linux 安装</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Ubuntu/Debian</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> mysql-server</span>
<span class="line"></span>
<span class="line"><span class="token comment"># CentOS/RHEL</span></span>
<span class="line"><span class="token function">sudo</span> yum <span class="token function">install</span> mysql-server</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 启动 MySQL 服务</span></span>
<span class="line"><span class="token function">sudo</span> systemctl start mysql</span>
<span class="line"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> mysql</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-macos-安装" tabindex="-1"><a class="header-anchor" href="#_2-3-macos-安装"><span>2.3 macOS 安装</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 使用 Homebrew</span></span>
<span class="line">brew <span class="token function">install</span> mysql</span>
<span class="line">brew services start mysql</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-配置文件" tabindex="-1"><a class="header-anchor" href="#_2-4-配置文件"><span>2.4 配置文件</span></a></h3><p>MySQL 配置文件通常位于 <code>/etc/mysql/my.cnf</code>（Linux）或 <code>my.ini</code>（Windows）</p><p>关键配置项：</p><ul><li><code>port</code>: 数据库端口（默认 3306）</li><li><code>max_connections</code>: 最大连接数</li><li><code>character_set_server</code>: 服务器字符集</li><li><code>datadir</code>: 数据存储目录</li></ul><hr><h2 id="_3-数据库基本操作" tabindex="-1"><a class="header-anchor" href="#_3-数据库基本操作"><span>3. 数据库基本操作</span></a></h2><h3 id="_3-1-连接-mysql" tabindex="-1"><a class="header-anchor" href="#_3-1-连接-mysql"><span>3.1 连接 MySQL</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span></span>
<span class="line"><span class="token comment"># 或指定主机和端口</span></span>
<span class="line">mysql <span class="token parameter variable">-h</span> localhost <span class="token parameter variable">-P</span> <span class="token number">3306</span> <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-数据库操作" tabindex="-1"><a class="header-anchor" href="#_3-2-数据库操作"><span>3.2 数据库操作</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 查看所有数据库</span></span>
<span class="line"><span class="token keyword">SHOW</span> <span class="token keyword">DATABASES</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 创建数据库</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> mydb <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token keyword">COLLATE</span> utf8mb4_unicode_ci<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 选择数据库</span></span>
<span class="line"><span class="token keyword">USE</span> mydb<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 删除数据库</span></span>
<span class="line"><span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> mydb<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 查看数据库信息</span></span>
<span class="line"><span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> mydb<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-表的基本操作" tabindex="-1"><a class="header-anchor" href="#_3-3-表的基本操作"><span>3.3 表的基本操作</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 创建表</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> users <span class="token punctuation">(</span></span>
<span class="line">  id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span></span>
<span class="line">  username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span></span>
<span class="line">  email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  age <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">  created_at <span class="token keyword">TIMESTAMP</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span></span>
<span class="line">  updated_at <span class="token keyword">TIMESTAMP</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CURRENT_TIMESTAMP</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 查看表结构</span></span>
<span class="line"><span class="token keyword">DESC</span> users<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> users<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 修改表</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> users <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> phone <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> users <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> age <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">18</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> users <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> phone<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 删除表</span></span>
<span class="line"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> users<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 重命名表</span></span>
<span class="line"><span class="token keyword">RENAME</span> <span class="token keyword">TABLE</span> users <span class="token keyword">TO</span> customers<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_4-数据类型" tabindex="-1"><a class="header-anchor" href="#_4-数据类型"><span>4. 数据类型</span></a></h2><h3 id="_4-1-数值类型" tabindex="-1"><a class="header-anchor" href="#_4-1-数值类型"><span>4.1 数值类型</span></a></h3><table><thead><tr><th>类型</th><th>字节</th><th>范围</th></tr></thead><tbody><tr><td>TINYINT</td><td>1</td><td>-128 ~ 127</td></tr><tr><td>SMALLINT</td><td>2</td><td>-32768 ~ 32767</td></tr><tr><td>INT</td><td>4</td><td>-2147483648 ~ 2147483647</td></tr><tr><td>BIGINT</td><td>8</td><td>-2^63 ~ 2^63-1</td></tr><tr><td>FLOAT</td><td>4</td><td>单精度浮点数</td></tr><tr><td>DOUBLE</td><td>8</td><td>双精度浮点数</td></tr><tr><td>DECIMAL(M,D)</td><td>-</td><td>精确小数</td></tr></tbody></table><h3 id="_4-2-字符串类型" tabindex="-1"><a class="header-anchor" href="#_4-2-字符串类型"><span>4.2 字符串类型</span></a></h3><table><thead><tr><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>CHAR(n)</td><td>固定长度字符串</td></tr><tr><td>VARCHAR(n)</td><td>可变长度字符串</td></tr><tr><td>TEXT</td><td>长文本</td></tr><tr><td>BLOB</td><td>二进制大对象</td></tr><tr><td>ENUM</td><td>枚举类型</td></tr><tr><td>SET</td><td>集合类型</td></tr></tbody></table><h3 id="_4-3-日期时间类型" tabindex="-1"><a class="header-anchor" href="#_4-3-日期时间类型"><span>4.3 日期时间类型</span></a></h3><table><thead><tr><th>类型</th><th>格式</th><th>范围</th></tr></thead><tbody><tr><td>DATE</td><td>YYYY-MM-DD</td><td>1000-01-01 ~ 9999-12-31</td></tr><tr><td>TIME</td><td>HH:MM:SS</td><td>-838:59:59 ~ 838:59:59</td></tr><tr><td>DATETIME</td><td>YYYY-MM-DD HH:MM:SS</td><td>1000-01-01 00:00:00 ~ 9999-12-31 23:59:59</td></tr><tr><td>TIMESTAMP</td><td>YYYY-MM-DD HH:MM:SS</td><td>1970-01-01 00:00:01 ~ 2038-01-19 03:14:07</td></tr></tbody></table><hr><h2 id="_5-sql-增删改查" tabindex="-1"><a class="header-anchor" href="#_5-sql-增删改查"><span>5. SQL 增删改查</span></a></h2><h3 id="_5-1-insert-插入数据" tabindex="-1"><a class="header-anchor" href="#_5-1-insert-插入数据"><span>5.1 INSERT 插入数据</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 插入单条记录</span></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> users <span class="token punctuation">(</span>username<span class="token punctuation">,</span> email<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#39;john&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;john@example.com&#39;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 插入多条记录</span></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> users <span class="token punctuation">(</span>username<span class="token punctuation">,</span> email<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> </span>
<span class="line">  <span class="token punctuation">(</span><span class="token string">&#39;jane&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;jane@example.com&#39;</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">(</span><span class="token string">&#39;bob&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;bob@example.com&#39;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 从另一个表插入</span></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> users <span class="token punctuation">(</span>username<span class="token punctuation">,</span> email<span class="token punctuation">,</span> age<span class="token punctuation">)</span> </span>
<span class="line"><span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> email<span class="token punctuation">,</span> age <span class="token keyword">FROM</span> tmp_users<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-select-查询数据" tabindex="-1"><a class="header-anchor" href="#_5-2-select-查询数据"><span>5.2 SELECT 查询数据</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 基本查询</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> username<span class="token punctuation">,</span> email <span class="token keyword">FROM</span> users<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 条件查询</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> age <span class="token operator">&gt;</span> <span class="token number">25</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> username <span class="token operator">=</span> <span class="token string">&#39;john&#39;</span> <span class="token operator">AND</span> age <span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> age <span class="token operator">BETWEEN</span> <span class="token number">20</span> <span class="token operator">AND</span> <span class="token number">30</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> username <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">&#39;john&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;jane&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;bob&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> email <span class="token operator">LIKE</span> <span class="token string">&#39;%@example.com&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 排序</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> age <span class="token keyword">ASC</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> created_at <span class="token keyword">DESC</span> <span class="token keyword">LIMIT</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 分页</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">LIMIT</span> <span class="token number">10</span> <span class="token keyword">OFFSET</span> <span class="token number">20</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 聚合函数</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> users<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MIN</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">FROM</span> users<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 分组</span></span>
<span class="line"><span class="token keyword">SELECT</span> age<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> users <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> age<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> age<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> users <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> age <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-3-update-更新数据" tabindex="-1"><a class="header-anchor" href="#_5-3-update-更新数据"><span>5.3 UPDATE 更新数据</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 更新单个字段</span></span>
<span class="line"><span class="token keyword">UPDATE</span> users <span class="token keyword">SET</span> age <span class="token operator">=</span> <span class="token number">26</span> <span class="token keyword">WHERE</span> username <span class="token operator">=</span> <span class="token string">&#39;john&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 更新多个字段</span></span>
<span class="line"><span class="token keyword">UPDATE</span> users <span class="token keyword">SET</span> age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span> email <span class="token operator">=</span> <span class="token string">&#39;newemail@example.com&#39;</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 条件更新</span></span>
<span class="line"><span class="token keyword">UPDATE</span> users <span class="token keyword">SET</span> age <span class="token operator">=</span> age <span class="token operator">+</span> <span class="token number">1</span> <span class="token keyword">WHERE</span> age <span class="token operator">&lt;</span> <span class="token number">25</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 更新所有记录</span></span>
<span class="line"><span class="token keyword">UPDATE</span> users <span class="token keyword">SET</span> updated_at <span class="token operator">=</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-4-delete-删除数据" tabindex="-1"><a class="header-anchor" href="#_5-4-delete-删除数据"><span>5.4 DELETE 删除数据</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 删除指定记录</span></span>
<span class="line"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 条件删除</span></span>
<span class="line"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> age <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 删除所有数据（保留表结构）</span></span>
<span class="line"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> users<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 清空表（效率更高）</span></span>
<span class="line"><span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> users<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_6-索引" tabindex="-1"><a class="header-anchor" href="#_6-索引"><span>6. 索引</span></a></h2><h3 id="_6-1-索引类型" tabindex="-1"><a class="header-anchor" href="#_6-1-索引类型"><span>6.1 索引类型</span></a></h3><ul><li><strong>PRIMARY KEY</strong>: 主键索引，唯一且非空</li><li><strong>UNIQUE</strong>: 唯一索引，唯一但可为空</li><li><strong>INDEX</strong>: 普通索引</li><li><strong>FULLTEXT</strong>: 全文索引</li><li><strong>COMPOSITE</strong>: 复合索引</li></ul><h3 id="_6-2-索引操作" tabindex="-1"><a class="header-anchor" href="#_6-2-索引操作"><span>6.2 索引操作</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 创建索引</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_username <span class="token keyword">ON</span> users<span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> idx_email <span class="token keyword">ON</span> users<span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_age_email <span class="token keyword">ON</span> users<span class="token punctuation">(</span>age<span class="token punctuation">,</span> email<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 查看索引</span></span>
<span class="line"><span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> users<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 删除索引</span></span>
<span class="line"><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> idx_username <span class="token keyword">ON</span> users<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 在 ALTER TABLE 中创建索引</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> users <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> idx_age <span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> users <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> idx_email <span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-索引最佳实践" tabindex="-1"><a class="header-anchor" href="#_6-3-索引最佳实践"><span>6.3 索引最佳实践</span></a></h3><ul><li>在经常用于 WHERE、ORDER BY、GROUP BY 的列上创建索引</li><li>避免在低基数列上创建索引</li><li>定期分析和优化索引</li><li>避免过多索引影响写入性能</li></ul><hr><h2 id="_7-关键字与约束" tabindex="-1"><a class="header-anchor" href="#_7-关键字与约束"><span>7. 关键字与约束</span></a></h2><h3 id="_7-1-常用约束" tabindex="-1"><a class="header-anchor" href="#_7-1-常用约束"><span>7.1 常用约束</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> products <span class="token punctuation">(</span></span>
<span class="line">  id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span></span>
<span class="line">  name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  price <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  stock <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">  category_id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  created_at <span class="token keyword">TIMESTAMP</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span> uk_name <span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>category_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> categories<span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-约束说明" tabindex="-1"><a class="header-anchor" href="#_7-2-约束说明"><span>7.2 约束说明</span></a></h3><ul><li><strong>NOT NULL</strong>: 非空约束</li><li><strong>PRIMARY KEY</strong>: 主键，唯一且非空</li><li><strong>UNIQUE</strong>: 唯一约束</li><li><strong>DEFAULT</strong>: 默认值</li><li><strong>AUTO_INCREMENT</strong>: 自动递增</li><li><strong>FOREIGN KEY</strong>: 外键约束</li><li><strong>CHECK</strong>: 检查约束</li></ul><hr><h2 id="_8-连接与关联" tabindex="-1"><a class="header-anchor" href="#_8-连接与关联"><span>8. 连接与关联</span></a></h2><h3 id="_8-1-内连接-inner-join" tabindex="-1"><a class="header-anchor" href="#_8-1-内连接-inner-join"><span>8.1 内连接 (INNER JOIN)</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>username<span class="token punctuation">,</span> o<span class="token punctuation">.</span>order_id </span>
<span class="line"><span class="token keyword">FROM</span> users u </span>
<span class="line"><span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> orders o <span class="token keyword">ON</span> u<span class="token punctuation">.</span>id <span class="token operator">=</span> o<span class="token punctuation">.</span>user_id<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-2-左连接-left-join" tabindex="-1"><a class="header-anchor" href="#_8-2-左连接-left-join"><span>8.2 左连接 (LEFT JOIN)</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>username<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>id<span class="token punctuation">)</span> </span>
<span class="line"><span class="token keyword">FROM</span> users u </span>
<span class="line"><span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> orders o <span class="token keyword">ON</span> u<span class="token punctuation">.</span>id <span class="token operator">=</span> o<span class="token punctuation">.</span>user_id </span>
<span class="line"><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> u<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-3-右连接-right-join" tabindex="-1"><a class="header-anchor" href="#_8-3-右连接-right-join"><span>8.3 右连接 (RIGHT JOIN)</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>username<span class="token punctuation">,</span> o<span class="token punctuation">.</span>order_id </span>
<span class="line"><span class="token keyword">FROM</span> users u </span>
<span class="line"><span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> orders o <span class="token keyword">ON</span> u<span class="token punctuation">.</span>id <span class="token operator">=</span> o<span class="token punctuation">.</span>user_id<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-4-交叉连接-cross-join" tabindex="-1"><a class="header-anchor" href="#_8-4-交叉连接-cross-join"><span>8.4 交叉连接 (CROSS JOIN)</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span> categories<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_8-5-自连接" tabindex="-1"><a class="header-anchor" href="#_8-5-自连接"><span>8.5 自连接</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> a<span class="token punctuation">.</span>id<span class="token punctuation">,</span> a<span class="token punctuation">.</span>name<span class="token punctuation">,</span> b<span class="token punctuation">.</span>name <span class="token keyword">as</span> parent_name</span>
<span class="line"><span class="token keyword">FROM</span> categories a </span>
<span class="line"><span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> categories b <span class="token keyword">ON</span> a<span class="token punctuation">.</span>parent_id <span class="token operator">=</span> b<span class="token punctuation">.</span>id<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_9-事务处理" tabindex="-1"><a class="header-anchor" href="#_9-事务处理"><span>9. 事务处理</span></a></h2><h3 id="_9-1-事务特性-acid" tabindex="-1"><a class="header-anchor" href="#_9-1-事务特性-acid"><span>9.1 事务特性（ACID）</span></a></h3><ul><li><strong>原子性 (Atomicity)</strong>: 事务要么全部执行，要么全部回滚</li><li><strong>一致性 (Consistency)</strong>: 事务前后数据一致</li><li><strong>隔离性 (Isolation)</strong>: 事务互不影响</li><li><strong>持久性 (Durability)</strong>: 提交后持久保存</li></ul><h3 id="_9-2-事务操作" tabindex="-1"><a class="header-anchor" href="#_9-2-事务操作"><span>9.2 事务操作</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 开始事务</span></span>
<span class="line"><span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 或</span></span>
<span class="line"><span class="token keyword">BEGIN</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 执行 SQL 操作</span></span>
<span class="line"><span class="token keyword">UPDATE</span> accounts <span class="token keyword">SET</span> balance <span class="token operator">=</span> balance <span class="token operator">-</span> <span class="token number">100</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">UPDATE</span> accounts <span class="token keyword">SET</span> balance <span class="token operator">=</span> balance <span class="token operator">+</span> <span class="token number">100</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 提交事务</span></span>
<span class="line"><span class="token keyword">COMMIT</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 回滚事务</span></span>
<span class="line"><span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 设置保存点</span></span>
<span class="line"><span class="token keyword">SAVEPOINT</span> sp1<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 回滚到保存点</span></span>
<span class="line"><span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> sp1<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-3-隔离级别" tabindex="-1"><a class="header-anchor" href="#_9-3-隔离级别"><span>9.3 隔离级别</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 查看隔离级别</span></span>
<span class="line"><span class="token keyword">SELECT</span> @<span class="token variable">@transaction_isolation</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 设置隔离级别</span></span>
<span class="line"><span class="token keyword">SET</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> <span class="token keyword">READ</span> <span class="token keyword">UNCOMMITTED</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SET</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> <span class="token keyword">READ</span> <span class="token keyword">COMMITTED</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SET</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> <span class="token keyword">REPEATABLE</span> <span class="token keyword">READ</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SET</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> <span class="token keyword">SERIALIZABLE</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_10-性能优化" tabindex="-1"><a class="header-anchor" href="#_10-性能优化"><span>10. 性能优化</span></a></h2><h3 id="_10-1-查询优化" tabindex="-1"><a class="header-anchor" href="#_10-1-查询优化"><span>10.1 查询优化</span></a></h3><ul><li>使用 EXPLAIN 分析查询计划</li><li>避免 SELECT *，只查询需要的列</li><li>使用索引加速查询</li><li>避免在 WHERE 中使用函数</li><li>使用连接代替子查询</li></ul><h3 id="_10-2-explain-查询分析" tabindex="-1"><a class="header-anchor" href="#_10-2-explain-查询分析"><span>10.2 EXPLAIN 查询分析</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> age <span class="token operator">&gt;</span> <span class="token number">25</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 关键字段说明：</span></span>
<span class="line"><span class="token comment">-- id: 查询序列号</span></span>
<span class="line"><span class="token comment">-- select_type: 查询类型（SIMPLE、PRIMARY、SUBQUERY 等）</span></span>
<span class="line"><span class="token comment">-- type: 访问类型（ALL、index、range、ref、eq_ref、const 等）</span></span>
<span class="line"><span class="token comment">-- key: 使用的索引</span></span>
<span class="line"><span class="token comment">-- rows: 扫描行数</span></span>
<span class="line"><span class="token comment">-- Extra: 额外信息</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-3-常见优化建议" tabindex="-1"><a class="header-anchor" href="#_10-3-常见优化建议"><span>10.3 常见优化建议</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 不好的做法</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span>created_at<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2024</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 优化后</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users <span class="token keyword">WHERE</span> created_at <span class="token operator">&gt;=</span> <span class="token string">&#39;2024-01-01&#39;</span> <span class="token operator">AND</span> created_at <span class="token operator">&lt;</span> <span class="token string">&#39;2025-01-01&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 不好的做法</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> orders <span class="token keyword">WHERE</span> amount<span class="token operator">/</span><span class="token number">100</span> <span class="token operator">&gt;</span> <span class="token number">50</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 优化后</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> orders <span class="token keyword">WHERE</span> amount <span class="token operator">&gt;</span> <span class="token number">5000</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_11-用户与权限管理" tabindex="-1"><a class="header-anchor" href="#_11-用户与权限管理"><span>11. 用户与权限管理</span></a></h2><h3 id="_11-1-用户管理" tabindex="-1"><a class="header-anchor" href="#_11-1-用户管理"><span>11.1 用户管理</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 创建用户</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">&#39;app_user&#39;</span><span class="token variable">@&#39;localhost&#39;</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&#39;password123&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">&#39;app_user&#39;</span><span class="token variable">@&#39;%&#39;</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&#39;password123&#39;</span><span class="token punctuation">;</span>  <span class="token comment">-- 任意主机</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 修改密码</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">&#39;app_user&#39;</span><span class="token variable">@&#39;localhost&#39;</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&#39;newpassword&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 删除用户</span></span>
<span class="line"><span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token string">&#39;app_user&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 查看用户</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-2-权限管理" tabindex="-1"><a class="header-anchor" href="#_11-2-权限管理"><span>11.2 权限管理</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 授予权限</span></span>
<span class="line"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span><span class="token punctuation">,</span> <span class="token keyword">UPDATE</span><span class="token punctuation">,</span> <span class="token keyword">DELETE</span> <span class="token keyword">ON</span> mydb<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">&#39;app_user&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> mydb<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">&#39;app_user&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> mydb<span class="token punctuation">.</span>users <span class="token keyword">TO</span> <span class="token string">&#39;read_user&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 撤销权限</span></span>
<span class="line"><span class="token keyword">REVOKE</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> mydb<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token string">&#39;app_user&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 查看权限</span></span>
<span class="line"><span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> <span class="token string">&#39;app_user&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 刷新权限</span></span>
<span class="line">FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_12-备份与恢复" tabindex="-1"><a class="header-anchor" href="#_12-备份与恢复"><span>12. 备份与恢复</span></a></h2><h3 id="_12-1-使用-mysqldump-备份" tabindex="-1"><a class="header-anchor" href="#_12-1-使用-mysqldump-备份"><span>12.1 使用 mysqldump 备份</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 备份单个数据库</span></span>
<span class="line">mysqldump <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span> mydb <span class="token operator">&gt;</span> mydb_backup.sql</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 备份多个数据库</span></span>
<span class="line">mysqldump <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span> <span class="token parameter variable">--databases</span> db1 db2 <span class="token operator">&gt;</span> backup.sql</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 备份所有数据库</span></span>
<span class="line">mysqldump <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span> --all-databases <span class="token operator">&gt;</span> all_backup.sql</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 备份特定表</span></span>
<span class="line">mysqldump <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span> mydb <span class="token function">users</span> products <span class="token operator">&gt;</span> tables_backup.sql</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-2-恢复数据库" tabindex="-1"><a class="header-anchor" href="#_12-2-恢复数据库"><span>12.2 恢复数据库</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 恢复单个数据库</span></span>
<span class="line">mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span> mydb <span class="token operator">&lt;</span> mydb_backup.sql</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 恢复所有数据库</span></span>
<span class="line">mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span> <span class="token operator">&lt;</span> all_backup.sql</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 从 SQL 文件恢复</span></span>
<span class="line">mysql<span class="token operator">&gt;</span> <span class="token builtin class-name">source</span> /path/to/backup.sql<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-3-增量备份" tabindex="-1"><a class="header-anchor" href="#_12-3-增量备份"><span>12.3 增量备份</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 启用二进制日志（在 my.cnf 中设置）</span></span>
<span class="line">log-bin<span class="token operator">=</span>mysql-bin</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看二进制日志</span></span>
<span class="line">SHOW BINARY LOGS<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 恢复特定时间点</span></span>
<span class="line">mysqlbinlog --start-datetime<span class="token operator">=</span><span class="token string">&quot;2024-01-01 10:00:00&quot;</span> <span class="token punctuation">\\</span></span>
<span class="line">            --stop-datetime<span class="token operator">=</span><span class="token string">&quot;2024-01-01 12:00:00&quot;</span> <span class="token punctuation">\\</span></span>
<span class="line">            mysql-bin.000001 <span class="token operator">|</span> mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_13-常用函数" tabindex="-1"><a class="header-anchor" href="#_13-常用函数"><span>13. 常用函数</span></a></h2><h3 id="_13-1-字符串函数" tabindex="-1"><a class="header-anchor" href="#_13-1-字符串函数"><span>13.1 字符串函数</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> </span>
<span class="line">  CONCAT<span class="token punctuation">(</span><span class="token string">&#39;Hello&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;World&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>       <span class="token comment">-- 字符串拼接</span></span>
<span class="line">  LENGTH<span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                      <span class="token comment">-- 字符串长度</span></span>
<span class="line">  UPPER<span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                       <span class="token comment">-- 转大写</span></span>
<span class="line">  LOWER<span class="token punctuation">(</span><span class="token string">&#39;HELLO&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                       <span class="token comment">-- 转小写</span></span>
<span class="line">  SUBSTR<span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>               <span class="token comment">-- 字符串截取</span></span>
<span class="line">  TRIM<span class="token punctuation">(</span><span class="token string">&#39;  hello  &#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                   <span class="token comment">-- 去除空格</span></span>
<span class="line">  <span class="token keyword">REPLACE</span><span class="token punctuation">(</span><span class="token string">&#39;hello world&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;world&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;MySQL&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">-- 字符串替换</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-2-数值函数" tabindex="-1"><a class="header-anchor" href="#_13-2-数值函数"><span>13.2 数值函数</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> </span>
<span class="line">  <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token number">3.14159</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token comment">-- 四舍五入</span></span>
<span class="line">  CEIL<span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">,</span>             <span class="token comment">-- 向上取整</span></span>
<span class="line">  FLOOR<span class="token punctuation">(</span><span class="token number">3.99</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment">-- 向下取整</span></span>
<span class="line">  ABS<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>               <span class="token comment">-- 绝对值</span></span>
<span class="line">  RAND<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                 <span class="token comment">-- 随机数</span></span>
<span class="line">  POWER<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment">-- 幂运算</span></span>
<span class="line">  SQRT<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">-- 平方根</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-3-日期函数" tabindex="-1"><a class="header-anchor" href="#_13-3-日期函数"><span>13.3 日期函数</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> </span>
<span class="line">  <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                          <span class="token comment">-- 当前日期时间</span></span>
<span class="line">  CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                      <span class="token comment">-- 当前日期</span></span>
<span class="line">  CURTIME<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                      <span class="token comment">-- 当前时间</span></span>
<span class="line">  DATE_ADD<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">DAY</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">-- 日期加法</span></span>
<span class="line">  DATEDIFF<span class="token punctuation">(</span><span class="token string">&#39;2024-12-31&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2024-01-01&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">-- 日期差</span></span>
<span class="line">  DATE_FORMAT<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;%Y-%m-%d&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">-- 日期格式化</span></span>
<span class="line">  <span class="token keyword">YEAR</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                   <span class="token comment">-- 提取年份</span></span>
<span class="line">  <span class="token keyword">MONTH</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                  <span class="token comment">-- 提取月份</span></span>
<span class="line">  <span class="token keyword">DAY</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">-- 提取日期</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_14-视图" tabindex="-1"><a class="header-anchor" href="#_14-视图"><span>14. 视图</span></a></h2><h3 id="_14-1-创建视图" tabindex="-1"><a class="header-anchor" href="#_14-1-创建视图"><span>14.1 创建视图</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 创建视图</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> user_orders <span class="token keyword">AS</span></span>
<span class="line"><span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>username<span class="token punctuation">,</span> o<span class="token punctuation">.</span>order_id<span class="token punctuation">,</span> o<span class="token punctuation">.</span>amount<span class="token punctuation">,</span> o<span class="token punctuation">.</span>created_at</span>
<span class="line"><span class="token keyword">FROM</span> users u</span>
<span class="line"><span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> orders o <span class="token keyword">ON</span> u<span class="token punctuation">.</span>id <span class="token operator">=</span> o<span class="token punctuation">.</span>user_id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 使用视图</span></span>
<span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> user_orders <span class="token keyword">WHERE</span> amount <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 修改视图</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">VIEW</span> user_orders <span class="token keyword">AS</span></span>
<span class="line"><span class="token keyword">SELECT</span> u<span class="token punctuation">.</span>username<span class="token punctuation">,</span> u<span class="token punctuation">.</span>email<span class="token punctuation">,</span> o<span class="token punctuation">.</span>order_id</span>
<span class="line"><span class="token keyword">FROM</span> users u</span>
<span class="line"><span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> orders o <span class="token keyword">ON</span> u<span class="token punctuation">.</span>id <span class="token operator">=</span> o<span class="token punctuation">.</span>user_id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 删除视图</span></span>
<span class="line"><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> user_orders<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_15-常见问题" tabindex="-1"><a class="header-anchor" href="#_15-常见问题"><span>15. 常见问题</span></a></h2><h3 id="_15-1-字符集问题" tabindex="-1"><a class="header-anchor" href="#_15-1-字符集问题"><span>15.1 字符集问题</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 查看字符集</span></span>
<span class="line"><span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">&#39;character%&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 设置数据库字符集</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> mydb <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token keyword">COLLATE</span> utf8mb4_unicode_ci<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 设置表字符集</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> users <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token keyword">COLLATE</span> utf8mb4_unicode_ci<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 设置列字符集</span></span>
<span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> users <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-2-连接数问题" tabindex="-1"><a class="header-anchor" href="#_15-2-连接数问题"><span>15.2 连接数问题</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 查看最大连接数</span></span>
<span class="line"><span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">&#39;max_connections&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 设置最大连接数</span></span>
<span class="line"><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> max_connections <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 查看当前连接数</span></span>
<span class="line"><span class="token keyword">SHOW</span> PROCESSLIST<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 杀死连接</span></span>
<span class="line"><span class="token keyword">KILL</span> CONNECTION_ID<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-3-锁表问题" tabindex="-1"><a class="header-anchor" href="#_15-3-锁表问题"><span>15.3 锁表问题</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token comment">-- 查看表锁</span></span>
<span class="line"><span class="token keyword">SHOW</span> <span class="token keyword">OPEN</span> <span class="token keyword">TABLES</span> <span class="token keyword">WHERE</span> In_use <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 查看进程</span></span>
<span class="line"><span class="token keyword">SHOW</span> PROCESSLIST<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 解除锁</span></span>
<span class="line"><span class="token keyword">UNLOCK</span> <span class="token keyword">TABLES</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>MySQL 是一个功能强大且广泛使用的数据库系统。掌握以上内容能够满足大多数应用场景的需求。持续学习和实践是提升 MySQL 技能的最好方法。</p>`,123))])}const k=l(o,[["render",r],["__file","index.html.vue"]]),m=JSON.parse('{"path":"/books/mysql-handbook/","title":"MySQL 使用手册","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"1. MySQL 基础概念","slug":"_1-mysql-基础概念","link":"#_1-mysql-基础概念","children":[{"level":3,"title":"1.1 什么是 MySQL","slug":"_1-1-什么是-mysql","link":"#_1-1-什么是-mysql","children":[]},{"level":3,"title":"1.2 MySQL 的特点","slug":"_1-2-mysql-的特点","link":"#_1-2-mysql-的特点","children":[]}]},{"level":2,"title":"2. MySQL 安装与配置","slug":"_2-mysql-安装与配置","link":"#_2-mysql-安装与配置","children":[{"level":3,"title":"2.1 Windows 安装","slug":"_2-1-windows-安装","link":"#_2-1-windows-安装","children":[]},{"level":3,"title":"2.2 Linux 安装","slug":"_2-2-linux-安装","link":"#_2-2-linux-安装","children":[]},{"level":3,"title":"2.3 macOS 安装","slug":"_2-3-macos-安装","link":"#_2-3-macos-安装","children":[]},{"level":3,"title":"2.4 配置文件","slug":"_2-4-配置文件","link":"#_2-4-配置文件","children":[]}]},{"level":2,"title":"3. 数据库基本操作","slug":"_3-数据库基本操作","link":"#_3-数据库基本操作","children":[{"level":3,"title":"3.1 连接 MySQL","slug":"_3-1-连接-mysql","link":"#_3-1-连接-mysql","children":[]},{"level":3,"title":"3.2 数据库操作","slug":"_3-2-数据库操作","link":"#_3-2-数据库操作","children":[]},{"level":3,"title":"3.3 表的基本操作","slug":"_3-3-表的基本操作","link":"#_3-3-表的基本操作","children":[]}]},{"level":2,"title":"4. 数据类型","slug":"_4-数据类型","link":"#_4-数据类型","children":[{"level":3,"title":"4.1 数值类型","slug":"_4-1-数值类型","link":"#_4-1-数值类型","children":[]},{"level":3,"title":"4.2 字符串类型","slug":"_4-2-字符串类型","link":"#_4-2-字符串类型","children":[]},{"level":3,"title":"4.3 日期时间类型","slug":"_4-3-日期时间类型","link":"#_4-3-日期时间类型","children":[]}]},{"level":2,"title":"5. SQL 增删改查","slug":"_5-sql-增删改查","link":"#_5-sql-增删改查","children":[{"level":3,"title":"5.1 INSERT 插入数据","slug":"_5-1-insert-插入数据","link":"#_5-1-insert-插入数据","children":[]},{"level":3,"title":"5.2 SELECT 查询数据","slug":"_5-2-select-查询数据","link":"#_5-2-select-查询数据","children":[]},{"level":3,"title":"5.3 UPDATE 更新数据","slug":"_5-3-update-更新数据","link":"#_5-3-update-更新数据","children":[]},{"level":3,"title":"5.4 DELETE 删除数据","slug":"_5-4-delete-删除数据","link":"#_5-4-delete-删除数据","children":[]}]},{"level":2,"title":"6. 索引","slug":"_6-索引","link":"#_6-索引","children":[{"level":3,"title":"6.1 索引类型","slug":"_6-1-索引类型","link":"#_6-1-索引类型","children":[]},{"level":3,"title":"6.2 索引操作","slug":"_6-2-索引操作","link":"#_6-2-索引操作","children":[]},{"level":3,"title":"6.3 索引最佳实践","slug":"_6-3-索引最佳实践","link":"#_6-3-索引最佳实践","children":[]}]},{"level":2,"title":"7. 关键字与约束","slug":"_7-关键字与约束","link":"#_7-关键字与约束","children":[{"level":3,"title":"7.1 常用约束","slug":"_7-1-常用约束","link":"#_7-1-常用约束","children":[]},{"level":3,"title":"7.2 约束说明","slug":"_7-2-约束说明","link":"#_7-2-约束说明","children":[]}]},{"level":2,"title":"8. 连接与关联","slug":"_8-连接与关联","link":"#_8-连接与关联","children":[{"level":3,"title":"8.1 内连接 (INNER JOIN)","slug":"_8-1-内连接-inner-join","link":"#_8-1-内连接-inner-join","children":[]},{"level":3,"title":"8.2 左连接 (LEFT JOIN)","slug":"_8-2-左连接-left-join","link":"#_8-2-左连接-left-join","children":[]},{"level":3,"title":"8.3 右连接 (RIGHT JOIN)","slug":"_8-3-右连接-right-join","link":"#_8-3-右连接-right-join","children":[]},{"level":3,"title":"8.4 交叉连接 (CROSS JOIN)","slug":"_8-4-交叉连接-cross-join","link":"#_8-4-交叉连接-cross-join","children":[]},{"level":3,"title":"8.5 自连接","slug":"_8-5-自连接","link":"#_8-5-自连接","children":[]}]},{"level":2,"title":"9. 事务处理","slug":"_9-事务处理","link":"#_9-事务处理","children":[{"level":3,"title":"9.1 事务特性（ACID）","slug":"_9-1-事务特性-acid","link":"#_9-1-事务特性-acid","children":[]},{"level":3,"title":"9.2 事务操作","slug":"_9-2-事务操作","link":"#_9-2-事务操作","children":[]},{"level":3,"title":"9.3 隔离级别","slug":"_9-3-隔离级别","link":"#_9-3-隔离级别","children":[]}]},{"level":2,"title":"10. 性能优化","slug":"_10-性能优化","link":"#_10-性能优化","children":[{"level":3,"title":"10.1 查询优化","slug":"_10-1-查询优化","link":"#_10-1-查询优化","children":[]},{"level":3,"title":"10.2 EXPLAIN 查询分析","slug":"_10-2-explain-查询分析","link":"#_10-2-explain-查询分析","children":[]},{"level":3,"title":"10.3 常见优化建议","slug":"_10-3-常见优化建议","link":"#_10-3-常见优化建议","children":[]}]},{"level":2,"title":"11. 用户与权限管理","slug":"_11-用户与权限管理","link":"#_11-用户与权限管理","children":[{"level":3,"title":"11.1 用户管理","slug":"_11-1-用户管理","link":"#_11-1-用户管理","children":[]},{"level":3,"title":"11.2 权限管理","slug":"_11-2-权限管理","link":"#_11-2-权限管理","children":[]}]},{"level":2,"title":"12. 备份与恢复","slug":"_12-备份与恢复","link":"#_12-备份与恢复","children":[{"level":3,"title":"12.1 使用 mysqldump 备份","slug":"_12-1-使用-mysqldump-备份","link":"#_12-1-使用-mysqldump-备份","children":[]},{"level":3,"title":"12.2 恢复数据库","slug":"_12-2-恢复数据库","link":"#_12-2-恢复数据库","children":[]},{"level":3,"title":"12.3 增量备份","slug":"_12-3-增量备份","link":"#_12-3-增量备份","children":[]}]},{"level":2,"title":"13. 常用函数","slug":"_13-常用函数","link":"#_13-常用函数","children":[{"level":3,"title":"13.1 字符串函数","slug":"_13-1-字符串函数","link":"#_13-1-字符串函数","children":[]},{"level":3,"title":"13.2 数值函数","slug":"_13-2-数值函数","link":"#_13-2-数值函数","children":[]},{"level":3,"title":"13.3 日期函数","slug":"_13-3-日期函数","link":"#_13-3-日期函数","children":[]}]},{"level":2,"title":"14. 视图","slug":"_14-视图","link":"#_14-视图","children":[{"level":3,"title":"14.1 创建视图","slug":"_14-1-创建视图","link":"#_14-1-创建视图","children":[]}]},{"level":2,"title":"15. 常见问题","slug":"_15-常见问题","link":"#_15-常见问题","children":[{"level":3,"title":"15.1 字符集问题","slug":"_15-1-字符集问题","link":"#_15-1-字符集问题","children":[]},{"level":3,"title":"15.2 连接数问题","slug":"_15-2-连接数问题","link":"#_15-2-连接数问题","children":[]},{"level":3,"title":"15.3 锁表问题","slug":"_15-3-锁表问题","link":"#_15-3-锁表问题","children":[]}]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]}],"git":{},"filePathRelative":"books/mysql-handbook/index.md"}');export{k as comp,m as data};
