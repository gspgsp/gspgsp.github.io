import{_ as y,g as i,o as m,c,b as l,k as h,h as d,j as g,v}from"./app-BB_BIQV8.js";const U={__name:"ImageWatermark",setup(I,{expose:t}){t();const u=i(null),a=i(null),n=i(null),s=i(null),o=i("@gspgsp.github.io"),p=i(24),f=i("#C456D2"),b=()=>u.value.click(),C=e=>{const r=e.target.files[0];if(!r)return;const x=new FileReader;x.onload=_=>{s.value=_.target.result,w()},x.readAsDataURL(r)},w=()=>{const e=new Image;e.src=s.value,e.onload=()=>{n.value=e;const r=a.value.getContext("2d");a.value.width=e.width,a.value.height=e.height,r.clearRect(0,0,e.width,e.height),r.drawImage(e,0,0)}},k={fileInput:u,canvas:a,image:n,imageUrl:s,watermarkText:o,fontSize:p,fontColor:f,triggerFileInput:b,handleFileChange:C,loadImage:w,drawWatermark:()=>{if(!n.value)return;const e=a.value.getContext("2d");e.clearRect(0,0,n.value.width,n.value.height),e.drawImage(n.value,0,0),e.font=`${p.value}px Arial`,e.fillStyle=f.value,e.textBaseline="bottom";const r=10;e.fillText(o.value,n.value.width-e.measureText(o.value).width-r,n.value.height-r)},downloadImage:()=>{if(!a.value)return;const e=document.createElement("a");e.href=a.value.toDataURL("image/png"),e.download="watermarked.png",e.click()},ref:i};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}},T={class:"watermark-container"},S={key:0,class:"image-preview"},V={ref:"canvas",class:"canvas"},W={key:1,class:"controls"};function F(I,t,u,a,n,s){return m(),c("div",T,[t[8]||(t[8]=l("h2",{class:"title"},"ğŸ“„ å›¾ç‰‡æ°´å°å·¥å…·",-1)),l("div",{class:"upload-area",onClick:a.triggerFileInput},t[3]||(t[3]=[l("span",null,"ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡",-1)])),l("input",{type:"file",accept:"image/*",ref:"fileInput",onChange:a.handleFileChange,class:"hidden-input"},null,544),a.imageUrl?(m(),c("div",S,[l("canvas",V,null,512)])):h("",!0),a.imageUrl?(m(),c("div",W,[l("label",null,[t[4]||(t[4]=d(" æ°´å°æ–‡å­—: ")),g(l("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>a.watermarkText=o),placeholder:"è¯·è¾“å…¥æ°´å°å†…å®¹"},null,512),[[v,a.watermarkText]])]),l("label",null,[t[5]||(t[5]=d(" å­—ä½“å¤§å°: ")),g(l("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=o=>a.fontSize=o),min:"10",max:"200"},null,512),[[v,a.fontSize,void 0,{number:!0}]]),t[6]||(t[6]=d(" px "))]),l("label",null,[t[7]||(t[7]=d(" å­—ä½“é¢œè‰²: ")),g(l("input",{type:"color","onUpdate:modelValue":t[2]||(t[2]=o=>a.fontColor=o)},null,512),[[v,a.fontColor]])]),l("button",{onClick:a.drawWatermark},"åº”ç”¨æ°´å°"),l("button",{onClick:a.downloadImage},"ä¸‹è½½å›¾ç‰‡")])):h("",!0)])}const z=y(U,[["render",F],["__scopeId","data-v-c569b760"],["__file","ImageWatermark.vue"]]);export{z as default};
