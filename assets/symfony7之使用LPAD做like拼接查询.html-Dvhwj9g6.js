import{_ as s,c as a,f as e,o as t}from"./app-BB_BIQV8.js";const p={};function i(l,n){return t(),a("div",null,n[0]||(n[0]=[e(`<h5 id="symfony7ä¹‹ä½¿ç”¨lpadåšlikeæ‹¼æ¥æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#symfony7ä¹‹ä½¿ç”¨lpadåšlikeæ‹¼æ¥æŸ¥è¯¢"><span>symfony7ä¹‹ä½¿ç”¨LPADåšlikeæ‹¼æ¥æŸ¥è¯¢</span></a></h5><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">è§£é‡Š:</span>
<span class="line">LPAD æ˜¯ SQL ä¸­çš„ä¸€ä¸ªå­—ç¬¦ä¸²å‡½æ•°ï¼Œå…¨ç§°æ˜¯ Left PADï¼Œæ„æ€æ˜¯ï¼šå‘å­—ç¬¦ä¸²å·¦è¾¹å¡«å……æŒ‡å®šå­—ç¬¦ï¼Œç›´åˆ°è¾¾åˆ°æŒ‡å®šé•¿åº¦ã€‚</span>
<span class="line"></span>
<span class="line">è¯­æ³•:</span>
<span class="line">LPAD(string, length, pad_string)</span>
<span class="line">stringï¼šè¦è¢«å¡«å……çš„åŸå­—ç¬¦ä¸²ï¼ˆå¯ä»¥æ˜¯å­—æ®µï¼‰</span>
<span class="line">lengthï¼šç›®æ ‡é•¿åº¦</span>
<span class="line">pad_stringï¼šç”¨æ¥å¡«å……çš„å­—ç¬¦ï¼ˆé€šå¸¸æ˜¯ &#39;0&#39;ï¼‰</span>
<span class="line"></span>
<span class="line">ä½¿ç”¨:</span>
<span class="line">åœ¨ Symfony 7 + Doctrine ä¸‹ä½¿ç”¨ \`LPAD\`ï¼ˆ\`Lpad\` å‡½æ•°ï¼‰ç¡®å®éœ€è¦é€šè¿‡å¼•å…¥ \`beberlei/DoctrineExtensions\` ä¸­çš„è‡ªå®šä¹‰ DQL å‡½æ•° \`DoctrineExtensions\\Query\\Mysql\\Lpad\`ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„å¼•å…¥ã€é…ç½®å’Œåœ¨ \`QueryBuilder\` ä¸­æ­£ç¡®ä½¿ç”¨çš„æ–¹å¼ã€‚</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h5 id="âœ…-1-å®‰è£…ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#âœ…-1-å®‰è£…ä¾èµ–"><span>âœ… 1. å®‰è£…ä¾èµ–</span></a></h5><p>é¦–å…ˆï¼Œç¡®ä¿å®‰è£…äº† <code>beberlei/DoctrineExtensions</code>ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">composer</span> require beberlei/DoctrineExtensions</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h5 id="âœ…-2-æ³¨å†Œ-lpad-å‡½æ•°åˆ°-doctrine" tabindex="-1"><a class="header-anchor" href="#âœ…-2-æ³¨å†Œ-lpad-å‡½æ•°åˆ°-doctrine"><span>âœ… 2. æ³¨å†Œ <code>Lpad</code> å‡½æ•°åˆ° Doctrine</span></a></h5><p>åœ¨ <code>config/packages/doctrine.yaml</code> ä¸­æ·»åŠ é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">doctrine</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">orm</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token key atrule">dql</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token key atrule">string_functions</span><span class="token punctuation">:</span></span>
<span class="line">                <span class="token key atrule">LPAD</span><span class="token punctuation">:</span> DoctrineExtensions\\Query\\Mysql\\Lpad</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ³¨æ„ï¼š<code>LPAD</code> æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œæ³¨å†Œåï¼ˆå·¦ä¾§ï¼‰éœ€è¦ä¸ SQL ä½¿ç”¨æ—¶ä¸€è‡´ã€‚</p></blockquote><hr><h5 id="âœ…-3-æ­£ç¡®ä½¿ç”¨-lpad-concat-like-ç»„åˆ" tabindex="-1"><a class="header-anchor" href="#âœ…-3-æ­£ç¡®ä½¿ç”¨-lpad-concat-like-ç»„åˆ"><span>âœ… 3. æ­£ç¡®ä½¿ç”¨ <code>LPAD</code> + <code>CONCAT</code> + <code>LIKE</code> ç»„åˆ</span></a></h5><p>åœ¨ QueryBuilder ä¸­ä¸èƒ½ç›´æ¥ä½¿ç”¨ PHP å‡½æ•°ï¼Œéœ€è¦ç”¨ DQL è¡¨è¾¾å¼æ¥å†™ã€‚ä½ æä¾›çš„è¯­æ³•ï¼š</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$qb</span><span class="token operator">-&gt;</span><span class="token function">expr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;CONCAT(e.abbreviation, &#39;-&#39;, LPAD(s.indexNumber, 6, 0))&quot;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;:searchString&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ˜¯å­—ç¬¦ä¸²ï¼Œ<strong>ä¸èƒ½ç›´æ¥ä¼ ç»™ <code>expr()-&gt;like()</code></strong>ã€‚æ­£ç¡®å†™æ³•æ˜¯ä½¿ç”¨ <code>Expr</code> çš„ <code>literal()</code> æˆ–æ‰‹åŠ¨æ‹¼æ¥ DQLï¼š</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$qb</span><span class="token operator">-&gt;</span><span class="token function">andWhere</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token variable">$qb</span><span class="token operator">-&gt;</span><span class="token function">expr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">like</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token string double-quoted-string">&quot;CONCAT(e.abbreviation, &#39;-&#39;, LPAD(s.indexNumber, 6, &#39;0&#39;))&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;:searchString&#39;</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$qb</span><span class="token operator">-&gt;</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;searchString&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;%&#39;</span> <span class="token operator">.</span> <span class="token variable">$searchString</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;%&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>âš ï¸ æ³¨æ„å‡ ç‚¹ï¼š</p><ul><li>LPAD ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å­—ç¬¦ï¼Œå¿…é¡»ç”¨ <code>&#39;0&#39;</code> åŒ…æ‹¬å¼•å·ã€‚</li><li><code>LPAD(s.indexNumber, 6, &#39;0&#39;)</code> æ˜¯ DQL ä¸­è‡ªå®šä¹‰å‡½æ•°ã€‚</li><li>æ•´ä¸ªè¡¨è¾¾å¼ä½œä¸ºå­—ç¬¦ä¸²ä¼ ç»™ <code>like()</code>ï¼Œç­‰ä»·äºåŸç”Ÿ SQLã€‚</li></ul><hr><h5 id="ğŸ§ª-ç¤ºä¾‹å®Œæ•´ä»£ç ç‰‡æ®µ" tabindex="-1"><a class="header-anchor" href="#ğŸ§ª-ç¤ºä¾‹å®Œæ•´ä»£ç ç‰‡æ®µ"><span>ğŸ§ª ç¤ºä¾‹å®Œæ•´ä»£ç ç‰‡æ®µ</span></a></h5><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$qb</span> <span class="token operator">=</span> <span class="token variable">$em</span><span class="token operator">-&gt;</span><span class="token function">createQueryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$qb</span><span class="token operator">-&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;s&#39;</span><span class="token punctuation">)</span></span>
<span class="line">   <span class="token operator">-&gt;</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token class-name static-context">Submission</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;s&#39;</span><span class="token punctuation">)</span></span>
<span class="line">   <span class="token operator">-&gt;</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;s.event&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;e&#39;</span><span class="token punctuation">)</span></span>
<span class="line">   <span class="token operator">-&gt;</span><span class="token function">andWhere</span><span class="token punctuation">(</span></span>
<span class="line">       <span class="token variable">$qb</span><span class="token operator">-&gt;</span><span class="token function">expr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">like</span><span class="token punctuation">(</span></span>
<span class="line">           <span class="token string double-quoted-string">&quot;CONCAT(e.abbreviation, &#39;-&#39;, LPAD(s.indexNumber, 6, &#39;0&#39;))&quot;</span><span class="token punctuation">,</span></span>
<span class="line">           <span class="token string single-quoted-string">&#39;:searchString&#39;</span></span>
<span class="line">       <span class="token punctuation">)</span></span>
<span class="line">   <span class="token punctuation">)</span></span>
<span class="line">   <span class="token operator">-&gt;</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;searchString&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;%&#39;</span> <span class="token operator">.</span> <span class="token variable">$searchTerm</span> <span class="token operator">.</span> <span class="token string single-quoted-string">&#39;%&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>å¦‚æœé‡åˆ° <code>Function &#39;LPAD&#39; does not exist</code>ï¼Œè¯´æ˜æ³¨å†Œæ²¡æœ‰æˆåŠŸï¼Œç¡®è®¤ï¼š</p><ul><li><code>doctrine.yaml</code> ä¸­çš„é…ç½®æ˜¯å¦åœ¨æ­£ç¡®ç¯å¢ƒä¸‹ï¼ˆæ¯”å¦‚ <code>dev</code>, <code>prod</code>ï¼‰ã€‚</li><li>é…ç½®æ˜¯å¦æ¸…é™¤ç¼“å­˜åé‡æ–°åŠ è½½äº†ï¼šè¿è¡Œ</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php bin/console cache:clear</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr>`,27)]))}const o=s(p,[["render",i],["__file","symfony7ä¹‹ä½¿ç”¨LPADåšlikeæ‹¼æ¥æŸ¥è¯¢.html.vue"]]),r=JSON.parse('{"path":"/content/php/symfony/symfony7%E4%B9%8B%E4%BD%BF%E7%94%A8LPAD%E5%81%9Alike%E6%8B%BC%E6%8E%A5%E6%9F%A5%E8%AF%A2.html","title":"symfony7ä¹‹ä½¿ç”¨LPADåšlikeæ‹¼æ¥æŸ¥è¯¢","lang":"en-US","frontmatter":{"sidebar":false,"title":"symfony7ä¹‹ä½¿ç”¨LPADåšlikeæ‹¼æ¥æŸ¥è¯¢","head":[["meta",{"name":"title","content":"symfony7ä¹‹ä½¿ç”¨LPADåšlikeæ‹¼æ¥æŸ¥è¯¢"}],["meta",{"name":"description","content":"symfony7ä¹‹ä½¿ç”¨LPADåšlikeæ‹¼æ¥æŸ¥è¯¢"}],["meta",{"name":"keywords","content":"symfony,php,LPAD"}],["meta",{"property":"og:title","content":"symfony7ä¹‹ä½¿ç”¨LPADåšlikeæ‹¼æ¥æŸ¥è¯¢"}],["meta",{"property":"og:description","content":"symfony7ä¹‹ä½¿ç”¨LPADåšlikeæ‹¼æ¥æŸ¥è¯¢"}]]},"headers":[],"git":{},"filePathRelative":"content/php/symfony/symfony7ä¹‹ä½¿ç”¨LPADåšlikeæ‹¼æ¥æŸ¥è¯¢.md"}');export{o as comp,r as data};
