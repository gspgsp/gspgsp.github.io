import{_ as n,c as a,f as e,o as i}from"./app-BB_BIQV8.js";const l={};function c(d,s){return i(),a("div",null,s[0]||(s[0]=[e(`<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">homestead下配置elasticsearch</span>
<span class="line">1.homestead.yaml文件修改，我这里使用 7.10.0，这是之前项目一直使用的版本，也是云服务器上的版本，注意后面安装ik分词器的时候也需要对应版本</span>
<span class="line">features:</span>
<span class="line">    - mysql: true</span>
<span class="line">    - redis: true</span>
<span class="line">    - memecached: true</span>
<span class="line">    - mariadb: false</span>
<span class="line">    - postgresql: true</span>
<span class="line">    - ohmyzsh: false</span>
<span class="line">    - webdriver: false</span>
<span class="line">    - elasticsearch:</span>
<span class="line">       version: 7.10.0</span>
<span class="line"></span>
<span class="line">services:</span>
<span class="line">    - enabled:</span>
<span class="line">          - &quot;mysql&quot;</span>
<span class="line">          - &quot;postgresql&quot;</span>
<span class="line">          - &quot;redis&quot;</span>
<span class="line">          - &quot;memecached&quot;</span>
<span class="line">          - &quot;elasticsearch&quot;</span>
<span class="line">#    - disabled:</span>
<span class="line">#        - &quot;postgresql@11-main&quot;</span>
<span class="line"></span>
<span class="line">ports:</span>
<span class="line">    - send: 33060 # MySQL/MariaDB</span>
<span class="line">      to: 3306</span>
<span class="line">    - send: 54320</span>
<span class="line">      to: 5432</span>
<span class="line">    - send: 6379</span>
<span class="line">      to: 6379</span>
<span class="line">    - send: 11211</span>
<span class="line">      to: 11211</span>
<span class="line">    - send: 9200</span>
<span class="line">      to: 9200</span>
<span class="line"></span>
<span class="line">2.重新启动vagrant加载配置</span>
<span class="line">$ vagrant.exe reload --provision</span>
<span class="line"></span>
<span class="line">3.安装ik分词器插件</span>
<span class="line">#]cd /usr/share/elasticsearch/plugins</span>
<span class="line">#]mkdir ik</span>
<span class="line">#]chmod -R 777 ./ik</span>
<span class="line">#]cd ik</span>
<span class="line">#]wget https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.10.0/elasticsearch-analysis-ik-7.10.0.zip</span>
<span class="line">#]unzip elasticsearch-analysis-ik-7.10.0.zip</span>
<span class="line"></span>
<span class="line">4.重启es服务</span>
<span class="line">#]service elasticsearch restart</span>
<span class="line"></span>
<span class="line">5.本地测试</span>
<span class="line">#] curl 127.0.0.1:9200</span>
<span class="line">{</span>
<span class="line">  &quot;name&quot; : &quot;homestead&quot;,</span>
<span class="line">  &quot;cluster_name&quot; : &quot;homestead&quot;,</span>
<span class="line">  &quot;cluster_uuid&quot; : &quot;aoCViOY0ScGvX9AXldGbRQ&quot;,</span>
<span class="line">  &quot;version&quot; : {</span>
<span class="line">    &quot;number&quot; : &quot;7.10.0&quot;,</span>
<span class="line">    &quot;build_flavor&quot; : &quot;default&quot;,</span>
<span class="line">    &quot;build_type&quot; : &quot;deb&quot;,</span>
<span class="line">    &quot;build_hash&quot; : &quot;51e9d6f22758d0374a0f3f5c6e8f3a7997850f96&quot;,</span>
<span class="line">    &quot;build_date&quot; : &quot;2020-11-09T21:30:33.964949Z&quot;,</span>
<span class="line">    &quot;build_snapshot&quot; : false,</span>
<span class="line">    &quot;lucene_version&quot; : &quot;8.7.0&quot;,</span>
<span class="line">    &quot;minimum_wire_compatibility_version&quot; : &quot;6.8.0&quot;,</span>
<span class="line">    &quot;minimum_index_compatibility_version&quot; : &quot;6.0.0-beta1&quot;</span>
<span class="line">  },</span>
<span class="line">  &quot;tagline&quot; : &quot;You Know, for Search&quot;</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">6.配置除本机以外的客户端访问</span>
<span class="line">我记得自己搭建es会创建 elasticsearch:elasticsearch 用户名:用户组</span>
<span class="line">所以 修改 /etc/elasticsearch/elasticsearch.yml 需要 elasticsearch 用户 或者 root 用户</span>
<span class="line">我就直接使用 root用户：</span>
<span class="line">vagrant@homestead:/etc$ sudo su root</span>
<span class="line"></span>
<span class="line">root@homestead:/etc/elasticsearch# vim elasticsearch.yml</span>
<span class="line"></span>
<span class="line">cluster.name: homestead</span>
<span class="line">#</span>
<span class="line"># ------------------------------------ Node ------------------------------------</span>
<span class="line">#</span>
<span class="line"># Use a descriptive name for the node:</span>
<span class="line">#</span>
<span class="line">#node.name: node-1</span>
<span class="line">#</span>
<span class="line"># Add custom attributes to the node:</span>
<span class="line">#</span>
<span class="line">#node.attr.rack: r1</span>
<span class="line">#</span>
<span class="line"># ----------------------------------- Paths ------------------------------------</span>
<span class="line">#</span>
<span class="line"># Path to directory where to store the data (separate multiple locations by comma):</span>
<span class="line">#</span>
<span class="line">path.data: /var/lib/elasticsearch</span>
<span class="line">#</span>
<span class="line"># Path to log files:</span>
<span class="line">#</span>
<span class="line">path.logs: /var/log/elasticsearch</span>
<span class="line">#</span>
<span class="line"># ----------------------------------- Memory -----------------------------------</span>
<span class="line">#</span>
<span class="line"># Lock the memory on startup:</span>
<span class="line">#</span>
<span class="line">#bootstrap.memory_lock: true</span>
<span class="line">#</span>
<span class="line"># Make sure that the heap size is set to about half the memory available</span>
<span class="line"># on the system and that the owner of the process is allowed to use this</span>
<span class="line"># limit.</span>
<span class="line">#</span>
<span class="line"># Elasticsearch performs poorly when the system is swapping the memory.</span>
<span class="line">#</span>
<span class="line"># ---------------------------------- Network -----------------------------------</span>
<span class="line">#</span>
<span class="line"># Set the bind address to a specific IP (IPv4 or IPv6):</span>
<span class="line">#</span>
<span class="line">network.host: 0.0.0.0</span>
<span class="line">#</span>
<span class="line"># Set a custom port for HTTP:</span>
<span class="line">#</span>
<span class="line">#http.port: 9200</span>
<span class="line">#</span>
<span class="line"># For more information, consult the network module documentation.</span>
<span class="line">#</span>
<span class="line"># --------------------------------- Discovery ----------------------------------</span>
<span class="line">#</span>
<span class="line"># Pass an initial list of hosts to perform discovery when this node is started:</span>
<span class="line"># The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]</span>
<span class="line">#</span>
<span class="line">#discovery.seed_hosts: [&quot;host1&quot;, &quot;host2&quot;]</span>
<span class="line">#</span>
<span class="line"># Bootstrap the cluster using an initial set of master-eligible nodes:</span>
<span class="line">#</span>
<span class="line">cluster.initial_master_nodes: [&quot;node-1&quot;]</span>
<span class="line">#</span>
<span class="line"># For more information, consult the discovery and cluster formation module documentation.</span>
<span class="line">#</span>
<span class="line"># ---------------------------------- Gateway -----------------------------------</span>
<span class="line">#</span>
<span class="line"># Block initial recovery after a full cluster restart until N nodes are started:</span>
<span class="line">#</span>
<span class="line">#gateway.recover_after_nodes: 3</span>
<span class="line">#</span>
<span class="line"># For more information, consult the gateway module documentation.</span>
<span class="line">#</span>
<span class="line"># ---------------------------------- Various -----------------------------------</span>
<span class="line">#</span>
<span class="line"># Require explicit names when deleting indices:</span>
<span class="line">#</span>
<span class="line">#action.destructive_requires_name: true</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">再次重启报错：</span>
<span class="line">[1]: the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured</span>
<span class="line"></span>
<span class="line">原因是: 如果配置了network.host  0.0.0.0 ，就是允许除了本机以外的其它客户端访问，那么就需要配置一个主节点的名字才行，所以 在上面的 yml 文件里配置了： cluster.initial_master_nodes: [&quot;node-1&quot;]</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1)]))}const v=n(l,[["render",c],["__file","laravel之homestead下elasticsearch安装.html.vue"]]),r=JSON.parse('{"path":"/content/php/laravel/laravel%E4%B9%8Bhomestead%E4%B8%8Belasticsearch%E5%AE%89%E8%A3%85.html","title":"laravel之homestead下elasticsearch安装","lang":"en-US","frontmatter":{"sidebar":false,"title":"laravel之homestead下elasticsearch安装","description":"laravel之homestead下elasticsearch安装"},"headers":[],"git":{},"filePathRelative":"content/php/laravel/laravel之homestead下elasticsearch安装.md"}');export{v as comp,r as data};
