import{_ as n,c as a,f as p,o as e}from"./app-BB_BIQV8.js";const t={};function l(c,s){return e(),a("div",null,s[0]||(s[0]=[p(`<h3 id="phpä¹‹phpseclibåº“çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#phpä¹‹phpseclibåº“çš„ä½¿ç”¨"><span>phpä¹‹phpseclibåº“çš„ä½¿ç”¨</span></a></h3><p><strong>phpseclib/phpseclib</strong> æ˜¯ PHP é‡Œæœ€å¸¸ç”¨ã€æœ€ç¨³å®šçš„çº¯ PHP å®ç°çš„åŠ å¯†/SSH/SFTP/RSA ç­‰åŠŸèƒ½åº“ä¹‹ä¸€ï¼Œä¸ä¾èµ– openssl æ‰©å±•ï¼Œå…¼å®¹æ€§éå¸¸å¼ºã€‚</p><p>ä¸‹é¢ç»™ä¸€ä¸ªå…¨é¢ä½†æ˜“æ‡‚çš„ä»‹ç»ã€‚</p><hr><h3 id="âœ…-phpseclib-phpseclib-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#âœ…-phpseclib-phpseclib-æ˜¯ä»€ä¹ˆ"><span>âœ… phpseclib/phpseclib æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h3><p>ä¸€ä¸ª <strong>çº¯ PHP</strong> çš„å®‰å…¨åº“ï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š</p><table><thead><tr><th>æ¨¡å—</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>phpseclib\\Net\\SSH2</code></td><td>SSH ç™»å½•ã€æ‰§è¡Œå‘½ä»¤</td></tr><tr><td><code>phpseclib\\Net\\SFTP</code></td><td>SFTP ä¸Šä¼ /ä¸‹è½½/åˆ é™¤æ–‡ä»¶</td></tr><tr><td><code>phpseclib\\Crypt\\RSA</code></td><td>RSA ç”Ÿæˆå¯†é’¥ã€åŠ å¯†/è§£å¯†ã€ç­¾å/éªŒç­¾</td></tr><tr><td><code>phpseclib\\Crypt\\AESã€DES ç­‰</code></td><td>å¯¹ç§°åŠ å¯†/è§£å¯†</td></tr><tr><td><code>phpseclib\\Crypt\\PublicKeyLoader</code></td><td>åŠ è½½å„ç§æ ¼å¼çš„å¯†é’¥ï¼ˆOpenSSHã€PKCS1ã€PKCS8 ç­‰ï¼‰</td></tr></tbody></table><p>æ”¯æŒ PHP 5.6+ åˆ° PHP 8.3ã€‚</p><hr><h3 id="ğŸ”¥-æœ€å¸¸è§ç”¨æ³•ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ğŸ”¥-æœ€å¸¸è§ç”¨æ³•ç¤ºä¾‹"><span>ğŸ”¥ æœ€å¸¸è§ç”¨æ³•ç¤ºä¾‹</span></a></h3><h4 id="_1-ssh-è¿œç¨‹æ‰§è¡Œå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_1-ssh-è¿œç¨‹æ‰§è¡Œå‘½ä»¤"><span>1. <strong>SSH è¿œç¨‹æ‰§è¡Œå‘½ä»¤</strong></span></a></h4><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">phpseclib3<span class="token punctuation">\\</span>Net<span class="token punctuation">\\</span>SSH2</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$ssh</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SSH2</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;example.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$ssh</span><span class="token operator">-&gt;</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;username&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;password&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Login Failed&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">echo</span> <span class="token variable">$ssh</span><span class="token operator">-&gt;</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;ls -la&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_2-sftp-ä¸Šä¼ æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-sftp-ä¸Šä¼ æ–‡ä»¶"><span>2. <strong>SFTP ä¸Šä¼ æ–‡ä»¶</strong></span></a></h4><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">phpseclib3<span class="token punctuation">\\</span>Net<span class="token punctuation">\\</span>SFTP</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sftp</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SFTP</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;example.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$sftp</span><span class="token operator">-&gt;</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;username&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;password&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$sftp</span><span class="token operator">-&gt;</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/remote/path/file.txt&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;hello world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_3-rsa-åŠ å¯†-è§£å¯†" tabindex="-1"><a class="header-anchor" href="#_3-rsa-åŠ å¯†-è§£å¯†"><span>3. <strong>RSA åŠ å¯†/è§£å¯†</strong></span></a></h4><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">phpseclib3<span class="token punctuation">\\</span>Crypt<span class="token punctuation">\\</span>PublicKeyLoader</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$privateKey</span> <span class="token operator">=</span> <span class="token class-name static-context">PublicKeyLoader</span><span class="token operator">::</span><span class="token function">loadPrivateKey</span><span class="token punctuation">(</span><span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;private.pem&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$publicKey</span> <span class="token operator">=</span> <span class="token class-name static-context">PublicKeyLoader</span><span class="token operator">::</span><span class="token function">loadPublicKey</span><span class="token punctuation">(</span><span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;public.pem&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$encrypted</span> <span class="token operator">=</span> <span class="token variable">$publicKey</span><span class="token operator">-&gt;</span><span class="token function">encrypt</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$decrypted</span> <span class="token operator">=</span> <span class="token variable">$privateKey</span><span class="token operator">-&gt;</span><span class="token function">decrypt</span><span class="token punctuation">(</span><span class="token variable">$encrypted</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">echo</span> <span class="token variable">$decrypted</span><span class="token punctuation">;</span> <span class="token comment">// hello</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_4-rsa-ç­¾å-éªŒç­¾" tabindex="-1"><a class="header-anchor" href="#_4-rsa-ç­¾å-éªŒç­¾"><span>4. <strong>RSA ç­¾å / éªŒç­¾</strong></span></a></h4><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$signature</span> <span class="token operator">=</span> <span class="token variable">$privateKey</span><span class="token operator">-&gt;</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$publicKey</span><span class="token operator">-&gt;</span><span class="token function">verify</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$signature</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;OK&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="â­-phpseclib-çš„äº®ç‚¹" tabindex="-1"><a class="header-anchor" href="#â­-phpseclib-çš„äº®ç‚¹"><span>â­ phpseclib çš„äº®ç‚¹</span></a></h4><ul><li><strong>çº¯ PHP å®ç°ï¼Œä¸ä¾èµ– openssl æ‰©å±•</strong> åœ¨æ²¡æœ‰æ‰©å±•çš„å…±äº«æœåŠ¡å™¨æˆ–æŸäº› Docker ç¯å¢ƒå¾ˆå¸¸ç”¨ã€‚</li><li><strong>æ”¯æŒå¤šç§ SSH å¯†é’¥æ ¼å¼</strong> æ¯”å¦‚ OpenSSHã€Puttyã€PKCS1ã€PKCS8ã€‚</li><li><strong>å…¼å®¹æ€§å¥½</strong>ï¼Œä¸æŒ‘ PHP ç‰ˆæœ¬ã€‚</li><li>API å¾ˆæ¸…æ™°ï¼Œéå¸¸é€‚åˆ <strong>SFTP è‡ªåŠ¨åŒ–</strong> å’Œ <strong>æ”¯ä»˜ç­¾å/éªŒç­¾</strong>ã€‚</li></ul>`,24)]))}const o=n(t,[["render",l],["__file","phpä¹‹phpseclibåº“çš„ä½¿ç”¨.html.vue"]]),r=JSON.parse('{"path":"/content/php/base/php%E4%B9%8Bphpseclib%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8.html","title":"phpä¹‹phpseclibåº“çš„ä½¿ç”¨","lang":"en-US","frontmatter":{"sidebar":false,"title":"phpä¹‹phpseclibåº“çš„ä½¿ç”¨","head":[["meta",{"name":"title","content":"phpä¹‹phpseclibåº“çš„ä½¿ç”¨"}],["meta",{"name":"description","content":"phpä¹‹phpseclibåº“çš„ä½¿ç”¨"}],["meta",{"name":"keywords","content":"phpä¹‹phpseclibåº“çš„ä½¿ç”¨"}],["meta",{"property":"og:title","content":"phpä¹‹phpseclibåº“çš„ä½¿ç”¨"}],["meta",{"property":"og:description","content":"phpä¹‹phpseclibåº“çš„ä½¿ç”¨"}]]},"headers":[{"level":3,"title":"phpä¹‹phpseclibåº“çš„ä½¿ç”¨","slug":"phpä¹‹phpseclibåº“çš„ä½¿ç”¨","link":"#phpä¹‹phpseclibåº“çš„ä½¿ç”¨","children":[]},{"level":3,"title":"âœ… phpseclib/phpseclib æ˜¯ä»€ä¹ˆï¼Ÿ","slug":"âœ…-phpseclib-phpseclib-æ˜¯ä»€ä¹ˆ","link":"#âœ…-phpseclib-phpseclib-æ˜¯ä»€ä¹ˆ","children":[]},{"level":3,"title":"ğŸ”¥ æœ€å¸¸è§ç”¨æ³•ç¤ºä¾‹","slug":"ğŸ”¥-æœ€å¸¸è§ç”¨æ³•ç¤ºä¾‹","link":"#ğŸ”¥-æœ€å¸¸è§ç”¨æ³•ç¤ºä¾‹","children":[]}],"git":{},"filePathRelative":"content/php/base/phpä¹‹phpseclibåº“çš„ä½¿ç”¨.md"}');export{o as comp,r as data};
