import{_ as s,c as e,d as l,o as a}from"./app-CHrRue27.js";const i={};function d(c,n){return a(),e("div",null,n[0]||(n[0]=[l(`<h3 id="关于linux网络配置的分析-先从几个命令开始" tabindex="-1"><a class="header-anchor" href="#关于linux网络配置的分析-先从几个命令开始"><span>关于linux网络配置的分析，先从几个命令开始:</span></a></h3><h4 id="查看-管理网卡-ip-地址" tabindex="-1"><a class="header-anchor" href="#查看-管理网卡-ip-地址"><span>查看/管理网卡 IP 地址</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">$ ip a</span>
<span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span>
<span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span>
<span class="line">    inet 127.0.0.1/8 scope host lo</span>
<span class="line">       valid_lft forever preferred_lft forever</span>
<span class="line">    inet6 ::1/128 scope host </span>
<span class="line">       valid_lft forever preferred_lft forever</span>
<span class="line">2: enp3s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc fq_codel state DOWN group default qlen 1000</span>
<span class="line">    link/ether f4:6b:8c:89:58:f6 brd ff:ff:ff:ff:ff:ff</span>
<span class="line">3: wlp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000</span>
<span class="line">    link/ether e0:0a:f6:78:3b:1d brd ff:ff:ff:ff:ff:ff</span>
<span class="line">    inet 192.168.5.17/24 brd 192.168.5.255 scope global dynamic noprefixroute wlp2s0</span>
<span class="line">       valid_lft 81898sec preferred_lft 81898sec</span>
<span class="line">    inet6 fe80::76cf:e344:df5b:cd7d/64 scope link noprefixroute </span>
<span class="line">       valid_lft forever preferred_lft forever</span>
<span class="line">4: br-331156baf737: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default </span>
<span class="line">    link/ether 02:42:68:b9:16:de brd ff:ff:ff:ff:ff:ff</span>
<span class="line">    inet 192.168.49.1/24 brd 192.168.49.255 scope global br-331156baf737</span>
<span class="line">       valid_lft forever preferred_lft forever</span>
<span class="line">5: br-7cbb16a986d6: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span>
<span class="line">    link/ether 02:42:9e:f7:3d:7c brd ff:ff:ff:ff:ff:ff</span>
<span class="line">    inet 172.18.0.1/16 brd 172.18.255.255 scope global br-7cbb16a986d6</span>
<span class="line">       valid_lft forever preferred_lft forever</span>
<span class="line">    inet6 fe80::42:9eff:fef7:3d7c/64 scope link </span>
<span class="line">       valid_lft forever preferred_lft forever</span>
<span class="line">6: br-e6742f9d2eb1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span>
<span class="line">    link/ether 02:42:63:76:d0:bc brd ff:ff:ff:ff:ff:ff</span>
<span class="line">    inet 172.20.0.1/16 brd 172.20.255.255 scope global br-e6742f9d2eb1</span>
<span class="line">       valid_lft forever preferred_lft forever</span>
<span class="line">    inet6 fe80::42:63ff:fe76:d0bc/64 scope link </span>
<span class="line">       valid_lft forever preferred_lft forever</span>
<span class="line">7: br-fab0b27bf071: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span>
<span class="line">    link/ether 02:42:62:ab:2b:c9 brd ff:ff:ff:ff:ff:ff</span>
<span class="line">    inet 172.19.0.1/16 brd 172.19.255.255 scope global br-fab0b27bf071</span>
<span class="line">       valid_lft forever preferred_lft forever</span>
<span class="line">    inet6 fe80::42:62ff:feab:2bc9/64 scope link </span>
<span class="line">       valid_lft forever preferred_lft forever</span>
<span class="line">8: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span>
<span class="line">    link/ether 02:42:d8:b0:1c:e7 brd ff:ff:ff:ff:ff:ff</span>
<span class="line">    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0</span>
<span class="line">       valid_lft forever preferred_lft forever</span>
<span class="line">    inet6 fe80::42:d8ff:feb0:1ce7/64 scope link </span>
<span class="line">       valid_lft forever preferred_lft forever</span>
<span class="line">...</span>
<span class="line">...</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="查看-管理路由表" tabindex="-1"><a class="header-anchor" href="#查看-管理路由表"><span>查看/管理路由表</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">$ ip r</span>
<span class="line">default via 192.168.5.1 dev wlp2s0 proto dhcp metric 600 </span>
<span class="line">169.254.0.0/16 dev wlp2s0 scope link metric 1000 </span>
<span class="line">172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 </span>
<span class="line">172.18.0.0/16 dev br-7cbb16a986d6 proto kernel scope link src 172.18.0.1 </span>
<span class="line">172.19.0.0/16 dev br-fab0b27bf071 proto kernel scope link src 172.19.0.1 </span>
<span class="line">172.20.0.0/16 dev br-e6742f9d2eb1 proto kernel scope link src 172.20.0.1 </span>
<span class="line">192.168.5.0/24 dev wlp2s0 proto kernel scope link src 192.168.5.17 metric 600 </span>
<span class="line">192.168.49.0/24 dev br-331156baf737 proto kernel scope link src 192.168.49.1 linkdown </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="查看默认网关" tabindex="-1"><a class="header-anchor" href="#查看默认网关"><span>查看默认网关</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">$ ip route | grep default</span>
<span class="line">default via 192.168.5.1 dev wlp2s0 proto dhcp metric 600</span>
<span class="line"></span>
<span class="line">解析：</span>
<span class="line">默认网关 (default via 192.168.5.1)</span>
<span class="line"></span>
<span class="line">这表示所有 非本地子网 的网络流量（即访问外部网络的流量）默认会通过 192.168.5.1 进行转发。</span>
<span class="line">192.168.5.1 通常是你的路由器 IP 地址，宿主机通过这个网关访问外部互联网。</span>
<span class="line">dev wlp2s0</span>
<span class="line"></span>
<span class="line">这里的 wlp2s0 是你的 无线网卡接口，表示这个默认网关适用于你的无线网络连接。</span>
<span class="line">如果你使用的是有线网络，可能会看到 eth0 之类的接口名称。</span>
<span class="line">proto dhcp</span>
<span class="line"></span>
<span class="line">表示这个默认网关是通过 DHCP（动态主机配置协议）分配的。</span>
<span class="line">metric 600</span>
<span class="line"></span>
<span class="line">metric 表示 优先级，数值越低，优先级越高。</span>
<span class="line">这里的 600 说明 这个路由的优先级比更低的 metric（如 100、200）低，但仍然是默认路由。</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="查看宿主机所有的ip" tabindex="-1"><a class="header-anchor" href="#查看宿主机所有的ip"><span>查看宿主机所有的IP</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">$ hostname -I</span>
<span class="line">192.168.5.17 192.168.49.1 172.18.0.1 172.20.0.1 172.19.0.1 172.17.0.1</span>
<span class="line"></span>
<span class="line">其中192.168.5.17和172.17.0.1比较重要，在docker容器里面可以直接通过这两个IP访问宿主机的服务；同时，在宿主机萨和嗯访问容器服务的时候，是通过172.17.0.1这个docker网关通过NAT实现的。</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="关于子网络掩码计算-时间太久了-忘了不少" tabindex="-1"><a class="header-anchor" href="#关于子网络掩码计算-时间太久了-忘了不少"><span>关于子网络掩码计算(时间太久了，忘了不少)</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">假如我的网络信息如下:</span>
<span class="line">wlp0s20f3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000</span>
<span class="line">    link/ether 3c:e9:f7:65:75:d9 brd ff:ff:ff:ff:ff:ff</span>
<span class="line">    inet 188.188.55.68/23 brd 188.188.55.255 scope global dynamic noprefixroute wlp0s20f3</span>
<span class="line">       valid_lft 4311sec preferred_lft 4311sec</span>
<span class="line">    inet6 fe80::67c5:fbe6:2207:8de/64 scope link noprefixroute </span>
<span class="line">       valid_lft forever preferred_lft forever</span>
<span class="line"></span>
<span class="line">而 $ ip route | grep default</span>
<span class="line">default via 188.188.54.1 dev wlp0s20f3 proto dhcp metric 600</span>
<span class="line">188.188.55.68/23 和188.188.54.1 关系</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">解析188.188.55.68/23：</span>
<span class="line">inet 188.188.55.68/23 brd 188.188.55.255 scope global dynamic noprefixroute wlp0s20f3</span>
<span class="line"></span>
<span class="line">188.188.55.68 是本机 IP 地址（分配给 wlp0s20f3 接口）。</span>
<span class="line">/23 表示子网掩码 255.255.254.0，即 IP 范围是 188.188.54.0 - 188.188.55.255。</span>
<span class="line">brd 188.188.55.255 表示广播地址。</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">解析默认网关 188.188.54.1:</span>
<span class="line">default via 188.188.54.1 dev wlp0s20f3 proto dhcp metric 600</span>
<span class="line"></span>
<span class="line">这条路由规则表示：</span>
<span class="line">默认网关（Internet 出口）是 188.188.54.1。</span>
<span class="line">所有无法直接匹配的流量都会发送到 188.188.54.1 进行转发。</span>
<span class="line">dev wlp0s20f3 说明这个网关通过无线网卡（wlp0s20f3）访问。</span>
<span class="line">proto dhcp 说明这个路由是通过 DHCP 自动分配的。</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">188.188.55.68/23 和 188.188.54.1 的关系</span>
<span class="line">188.188.55.68 在 188.188.54.0/23 这个子网里，也就是说：</span>
<span class="line"></span>
<span class="line">188.188.54.1 和 188.188.55.68 在同一个子网（/23）。</span>
<span class="line">188.188.54.1 作为你的 默认网关，负责将非本地（非 188.188.54.0 - 188.188.55.255）的流量转发出去。</span>
<span class="line"></span>
<span class="line">为什么网关是 188.188.54.1 而不是 188.188.55.1？</span>
<span class="line">/23 的子网掩码 255.255.254.0 使得 188.188.54.0 - 188.188.55.255 属于同一个子网。</span>
<span class="line">这个子网的 第一个可用 IP（通常是 .1） 一般作为网关，而 .0 是网络地址，.255 是广播地址。</span>
<span class="line">可能 网络管理员配置了 188.188.54.1 作为这个 /23 网段的网关。</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">188.188.54.0 - 188.188.55.255 怎么计算来的?</span>
<span class="line">要计算 188.188.54.0 - 188.188.55.255 这个 IP 范围，我们需要根据子网掩码 /23（即 255.255.254.0）来进行计算。这里是具体的步骤：</span>
<span class="line">1. 子网掩码计算</span>
<span class="line">子网掩码 /23 表示：</span>
<span class="line"></span>
<span class="line">前 23 位是网络位，后面 9 位是主机位。</span>
<span class="line">255.255.254.0 对应二进制：11111111.11111111.11111110.00000000</span>
<span class="line">这个子网掩码将 IP 地址分为两个部分：</span>
<span class="line"></span>
<span class="line">网络部分（前 23 位）</span>
<span class="line">主机部分（后 9 位）</span>
<span class="line">2. 计算网络地址和广播地址</span>
<span class="line">网络地址（Network Address）</span>
<span class="line">IP 地址： 188.188.55.68</span>
<span class="line">子网掩码： 255.255.254.0（即 11111111.11111111.11111110.00000000）</span>
<span class="line">进行按位 与（AND）操作：</span>
<span class="line"></span>
<span class="line">188.188.55.68 的二进制表示为：10111100.10111100.00110111.01000100</span>
<span class="line">255.255.254.0 的二进制表示为：11111111.11111111.11111110.00000000</span>
<span class="line">如下:</span>
<span class="line">10111100.10111100.00110111.01000100  (188.188.55.68)</span>
<span class="line">AND</span>
<span class="line">11111111.11111111.11111110.00000000  (255.255.254.0)</span>
<span class="line">-----------------------------------</span>
<span class="line">10111100.10111100.00110110.00000000  (188.188.54.0)</span>
<span class="line">所以，网络地址是 188.188.54.0。</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">广播地址（Broadcast Address）</span>
<span class="line">广播地址是通过将主机部分的所有位设置为 1 来计算的：</span>
<span class="line"></span>
<span class="line">网络部分：188.188.54.0（即 10111100.10111100.00110110.00000000）</span>
<span class="line">主机部分全 1：00000000.00000000.00000001.11111111</span>
<span class="line">如下:</span>
<span class="line">10111100.10111100.00110110.00000000  (188.188.54.0)</span>
<span class="line">OR</span>
<span class="line">00000000.00000000.00000001.11111111  (主机部分全是1)</span>
<span class="line">-----------------------------------</span>
<span class="line">10111100.10111100.00110111.11111111  (188.188.55.255)</span>
<span class="line">所以，广播地址是 188.188.55.255。</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">IP 地址范围</span>
<span class="line">网络地址： 188.188.54.0（网络起始地址，不可用）</span>
<span class="line">广播地址： 188.188.55.255（广播地址，不可用）</span>
<span class="line">可用的主机地址范围： 188.188.54.1 到 188.188.55.254</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">总结</span>
<span class="line">网络地址： 188.188.54.0</span>
<span class="line">广播地址： 188.188.55.255</span>
<span class="line">可用主机范围： 188.188.54.1 到 188.188.55.254</span>
<span class="line">所以，188.188.54.0 - 188.188.55.255 这个范围代表了 一个包含 512 个 IP 地址的子网，其中 188.188.54.0 是网络地址，188.188.55.255 是广播地址，中间的 188.188.54.1 到 188.188.55.254 是可用的主机 IP 地址。</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11)]))}const r=s(i,[["render",d],["__file","关于linux网络配置的分析.html.vue"]]),v=JSON.parse('{"path":"/content/service/docker/%E5%85%B3%E4%BA%8Elinux%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E7%9A%84%E5%88%86%E6%9E%90.html","title":"关于linux网络配置的分析","lang":"en-US","frontmatter":{"sidebar":false,"title":"关于linux网络配置的分析","head":[["meta",{"name":"title","content":"关于linux网络配置的分析"}],["meta",{"name":"description","content":"关于linux网络配置的分析"}],["meta",{"name":"keywords","content":"linux,network,docker"}],["meta",{"property":"og:title","content":"关于linux网络配置的分析"}],["meta",{"property":"og:description","content":"关于linux网络配置的分析"}]]},"headers":[{"level":3,"title":"关于linux网络配置的分析，先从几个命令开始:","slug":"关于linux网络配置的分析-先从几个命令开始","link":"#关于linux网络配置的分析-先从几个命令开始","children":[]}],"git":{},"filePathRelative":"content/service/docker/关于linux网络配置的分析.md"}');export{r as comp,v as data};
