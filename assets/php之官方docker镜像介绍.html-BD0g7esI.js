import{_ as n,c as s,d as t,o as l}from"./app-CHrRue27.js";const i={};function a(d,e){return l(),s("div",null,e[0]||(e[0]=[t(`<h5 id="php之官方docker镜像介绍" tabindex="-1"><a class="header-anchor" href="#php之官方docker镜像介绍"><span>php之官方docker镜像介绍</span></a></h5><h5 id="_1-github-仓库" tabindex="-1"><a class="header-anchor" href="#_1-github-仓库"><span>1.gitHub 仓库</span></a></h5><ul><li><p><strong>官方 Docker 镜像的构建脚本和配置</strong> 这里包含用于生成 PHP 官方 Docker 镜像所需的 Dockerfile 模板、版本配置、以及相关的辅助脚本，比如 <code>docker-php-ext-install</code>、<code>docker-php-ext-configure</code>、<code>docker-php-ext-enable</code> 等 (<a href="https://github.com/docker-library/php?utm_source=chatgpt.com" title="docker-library/php: Docker Official Image packaging for PHP" target="_blank" rel="noopener noreferrer">GitHub</a>)。</p></li><li><p><strong>维护 “official images” 生态的一环</strong> 它是 Docker 官方镜像项目（Official Images）的一部分。这个项目由 <code>docker-library/official-images</code> 和 <code>docker-library/docs</code> 等仓库协同工作。<code>docker-library/php</code> 提供 PHP 镜像的源码和构建逻辑，而 <code>official-images</code> 管理镜像标签、架构和生成机制，<code>docs</code> 包含镜像的说明文档 (<a href="https://github.com/docker-library/official-images?utm_source=chatgpt.com" title="docker-library/official-images: Primary source of truth ..." target="_blank" rel="noopener noreferrer">GitHub</a>)。</p></li><li><p><strong>提供辅助构建工具</strong> 仓库中还包括了构建过程中使用的脚本，如 <code>apply-templates.sh</code>, <code>versions.sh</code>, <code>update.sh</code> 等，确保镜像构建版本一致、支持多架构，并可以自动化生成 Docker Hub 上的 README 和标签 (<a href="https://github.com/docker-library/php?utm_source=chatgpt.com" title="docker-library/php: Docker Official Image packaging for PHP" target="_blank" rel="noopener noreferrer">GitHub</a>)。</p></li></ul><hr><h5 id="_2-docker-镜像" tabindex="-1"><a class="header-anchor" href="#_2-docker-镜像"><span>2.docker 镜像</span></a></h5><ul><li>https://hub.docker.com/_/php/</li><li><blockquote><p>这是最主要、最可信赖的 PHP 官方镜像库，由 Docker 社区管理维护，包含多种 PHP 版本及构建变体，适用于不同的使用场景，如 CLI、FPM、Apache，或基于不同 Linux 发行版 (Debian、Alpine) 构建的镜像。</p></blockquote></li><li>官方镜像提供多个标签形式，常见包括： <ul><li>php:8.4, php:8.3, php:8.2 … —— 指定 PHP 主版本。</li><li>php:8.4-apache, php:8.4-fpm, php:8.4-cli —— 指定运行模式（如 Apache 模式、FPM 模式、命令行模式）。</li><li>php:8.4-apache-bullseye, php:8.4-fpm-buster —— 基于 Debian Bullseye 或 Buster 的镜像；如果省略，如 php:apache，则通常对应当前最新的稳定 Debian 版本。</li></ul></li><li>目前查看官网最新维护的有： <blockquote><p><code>alpine3.21</code> , <code>alpine3.22</code> , <code>bookworm</code> , <code>trixie</code> 这四个， 之前使用过<code>buster</code>, 但是 <code>buster</code> 已经被archive了, 需要使用特殊的配置才能继续使用， 但是还可以使用 <code>bullseye</code>. 不过后面应该也不能继续直接使用了</p></blockquote></li></ul><hr><h5 id="_3-debian-系列-如-buster、bullseye-alpine-轻量版-怎么理解" tabindex="-1"><a class="header-anchor" href="#_3-debian-系列-如-buster、bullseye-alpine-轻量版-怎么理解"><span>3.Debian 系列（如 buster、bullseye），Alpine（轻量版） 怎么理解？</span></a></h5><p><strong>Debian 系列（buster、bullseye）</strong> 和 <strong>Alpine（轻量版）</strong>，其实是指 <strong>PHP 官方 Docker 镜像的底层基础操作系统</strong>，就像房子下面的地基。</p><p>解释一下：</p><h5 id="_1-debian-系列-buster、bullseye" tabindex="-1"><a class="header-anchor" href="#_1-debian-系列-buster、bullseye"><span>1&gt;. Debian 系列（buster、bullseye）</span></a></h5><ul><li><strong>Debian</strong> 是一个稳定的 Linux 发行版，很多服务器系统（比如 Ubuntu）都基于它。 <ul><li><p><code>buster</code> 和 <code>bullseye</code> 是 Debian 的<strong>版本代号</strong>：</p><ul><li><strong>buster</strong> → Debian 10（较老）</li><li><strong>bullseye</strong> → Debian 11（较新，官方目前主推）</li><li>（再新的是 <code>bookworm</code> → Debian 12）</li></ul></li><li><p><strong>特点</strong>：</p><ul><li>体积中等（比 Alpine 大很多）。</li><li>软件包比较全，兼容性好。</li><li>更适合安装需要很多系统依赖的 PHP 扩展（比如 <code>gd</code>、<code>intl</code>、<code>imagick</code>）。</li></ul></li><li><p><strong>例子</strong>：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php:8.3-fpm-bullseye   <span class="token comment"># PHP 8.3 + FPM + Debian 11</span></span>
<span class="line">php:8.3-cli-buster     <span class="token comment"># PHP 8.3 + CLI + Debian 10</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h5 id="_2-alpine-轻量版" tabindex="-1"><a class="header-anchor" href="#_2-alpine-轻量版"><span>2&gt;. Alpine（轻量版）</span></a></h5><ul><li><strong>Alpine Linux</strong> 是一个非常小巧的 Linux 发行版。 <ul><li><p>默认体积非常小（官方 PHP Alpine 镜像通常在 15~30MB 左右）。</p></li><li><p><strong>特点</strong>：</p><ul><li>镜像小 → 下载、部署快。</li><li>运行时占用低。</li><li>但是<strong>有时候编译 PHP 扩展会比较麻烦</strong>，因为 Alpine 使用的是 <code>musl</code> 而不是 <code>glibc</code>，一些扩展可能需要额外 patch 或依赖。</li></ul></li><li><p><strong>例子</strong>：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php:8.3-fpm-alpine     <span class="token comment"># PHP 8.3 + FPM + Alpine</span></span>
<span class="line">php:8.3-cli-alpine3.18 <span class="token comment"># 指定 Alpine 版本</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h5 id="_3-对比总结" tabindex="-1"><a class="header-anchor" href="#_3-对比总结"><span>3&gt;. 对比总结</span></a></h5><table><thead><tr><th>特性</th><th>Debian 系列（buster/bullseye）</th><th>Alpine（轻量版）</th></tr></thead><tbody><tr><td>镜像大小</td><td>大（80~150MB）</td><td>小（15~30MB）</td></tr><tr><td>安装依赖</td><td>简单，APT 包全</td><td>有时复杂，需要 APK 或编译</td></tr><tr><td>性能</td><td>稳定</td><td>内存占用更少，但编译有坑</td></tr><tr><td>适用场景</td><td>功能齐全、依赖多</td><td>极简环境、追求体积</td></tr></tbody></table><p><strong>选择建议</strong>：</p><ul><li><strong>初学/大多数业务场景</strong> → 用 Debian（<code>bullseye</code>），省心。 <ul><li><strong>极致轻量或熟悉 Alpine 生态</strong> → 用 Alpine（适合云函数、小镜像部署）。</li></ul></li></ul><hr><h5 id="_4-php-官方-docker-镜像目前底层主要就支持这两种系统系" tabindex="-1"><a class="header-anchor" href="#_4-php-官方-docker-镜像目前底层主要就支持这两种系统系"><span>4.PHP 官方 Docker 镜像目前底层主要就支持这两种系统系</span></a></h5><ul><li><strong>Debian 系列</strong>（不同版本代号：<code>buster</code>、<code>bullseye</code>、<code>bookworm</code>）</li><li><strong>Alpine 系列</strong>（不同版本号：<code>alpine3.18</code>、<code>alpine3.19</code> 等）</li></ul><h5 id="📌-原因" tabindex="-1"><a class="header-anchor" href="#📌-原因"><span>📌 原因</span></a></h5><ol><li><p><strong>官方维护成本</strong> PHP 官方镜像是 Docker 官方库（<a href="https://github.com/docker-library/php" target="_blank" rel="noopener noreferrer">docker-library/php</a>）维护的，如果同时支持很多底层发行版（比如 Ubuntu、CentOS、Fedora），维护、构建、测试成本会非常高。</p></li><li><p><strong>兼容性</strong></p></li></ol><ul><li>Debian 系列稳定性高、依赖齐全，适合大多数业务。</li><li>Alpine 轻量、启动快，适合追求极致镜像体积的场景。 这两种基本覆盖了常见需求。</li></ul><ol start="3"><li><strong>技术路线</strong> Debian + Alpine 已经能覆盖：</li></ol><ul><li><strong>全功能 + 高兼容性</strong>（Debian）</li><li><strong>轻量化部署</strong>（Alpine）</li></ul><h5 id="当前可见的变体" tabindex="-1"><a class="header-anchor" href="#当前可见的变体"><span>当前可见的变体</span></a></h5><p>（以 PHP 8.3 为例）</p><table><thead><tr><th>标签</th><th>底层系统</th></tr></thead><tbody><tr><td><code>php:8.3</code>, <code>php:8.3-bullseye</code>, <code>php:8.3-fpm</code>, <code>php:8.3-apache</code></td><td>Debian 11 (bullseye)</td></tr><tr><td><code>php:8.3-buster</code>, <code>php:8.3-fpm-buster</code></td><td>Debian 10 (buster)</td></tr><tr><td><code>php:8.3-bookworm</code>, <code>php:8.3-fpm-bookworm</code></td><td>Debian 12 (bookworm)</td></tr><tr><td><code>php:8.3-alpine</code>, <code>php:8.3-fpm-alpine3.18</code></td><td>Alpine 3.18 / 3.19</td></tr></tbody></table><p>💡 换句话说：</p><ul><li>要稳定、依赖好装 → 用 Debian 变体（<code>bullseye</code> / <code>bookworm</code>）</li><li>要极致轻量 → 用 Alpine 变体（<code>alpine3.x</code>）</li></ul><hr><h5 id="查看php-容器的操作系统类型-以及版本" tabindex="-1"><a class="header-anchor" href="#查看php-容器的操作系统类型-以及版本"><span>查看PHP 容器的操作系统类型（以及版本）</span></a></h5><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">进入php 容器实行:</span>
<span class="line"># cat /etc/os-release</span>
<span class="line"></span>
<span class="line">我的:</span>
<span class="line">PRETTY_NAME=&quot;Debian GNU/Linux 12 (bookworm)&quot;</span>
<span class="line">NAME=&quot;Debian GNU/Linux&quot;</span>
<span class="line">VERSION_ID=&quot;12&quot;</span>
<span class="line">VERSION=&quot;12 (bookworm)&quot;</span>
<span class="line">VERSION_CODENAME=bookworm</span>
<span class="line">ID=debian</span>
<span class="line">HOME_URL=&quot;https://www.debian.org/&quot;</span>
<span class="line">SUPPORT_URL=&quot;https://www.debian.org/support&quot;</span>
<span class="line">BUG_REPORT_URL=&quot;https://bugs.debian.org/&quot;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>分析: 这个PHP 容器底层操作系统是 <strong>Debian 12（Bookworm）</strong>。</p><p>从提供的信息可以看出：</p><table><thead><tr><th>字段</th><th>值</th><th>含义</th></tr></thead><tbody><tr><td><code>PRETTY_NAME</code></td><td><code>Debian GNU/Linux 12 (bookworm)</code></td><td>人类可读的完整系统名称</td></tr><tr><td><code>NAME</code></td><td><code>Debian GNU/Linux</code></td><td>系统名称</td></tr><tr><td><code>VERSION_ID</code></td><td><code>12</code></td><td>版本号</td></tr><tr><td><code>VERSION</code></td><td><code>12 (bookworm)</code></td><td>版本信息</td></tr><tr><td><code>VERSION_CODENAME</code></td><td><code>bookworm</code></td><td>Debian 代号</td></tr><tr><td><code>ID</code></td><td><code>debian</code></td><td>系统 ID，用于脚本识别</td></tr><tr><td><code>HOME_URL</code> / <code>SUPPORT_URL</code> / <code>BUG_REPORT_URL</code></td><td>官方网站和支持链接</td><td>官方资源链接</td></tr></tbody></table><hr><p>💡 <strong>总结</strong>：</p><ul><li>PHP 镜像基于 <strong>Debian Bookworm</strong>。</li><li>这是当前 Debian stable（稳定版），官方镜像推荐在生产环境中使用。</li><li>相比 Alpine 镜像，Bookworm 镜像更大，但兼容性和稳定性更好。</li><li>如果安装 PHP 扩展，可以直接使用 <code>docker-php-ext-install</code>、<code>docker-php-ext-configure</code> 等工具，无需额外处理源码目录（非 Alpine 镜像通常自带 <code>/usr/src/php/ext</code>）。</li></ul><hr><h5 id="debian-vs-alpine-php-官方镜像对比表" tabindex="-1"><a class="header-anchor" href="#debian-vs-alpine-php-官方镜像对比表"><span><strong>Debian vs Alpine PHP 官方镜像对比表</strong></span></a></h5><ul><li>🐘 PHP 官方镜像底层对比：Debian vs Alpine</li></ul><table><thead><tr><th>特性</th><th>Debian 系列（buster/bullseye/bookworm）</th><th>Alpine 系列</th></tr></thead><tbody><tr><td><strong>镜像体积</strong></td><td>中等，约 80~150MB</td><td>极小，约 15~30MB</td></tr><tr><td><strong>包管理</strong></td><td>APT (<code>apt-get</code>)</td><td>APK (<code>apk</code>)</td></tr><tr><td><strong>默认 libc</strong></td><td>glibc</td><td>musl</td></tr><tr><td><strong>扩展安装</strong></td><td>大部分扩展开箱即用，兼容性高</td><td>某些扩展可能需要额外依赖和 patch</td></tr><tr><td><strong>稳定性</strong></td><td>高，适合生产环境</td><td>较高，但部分扩展可能遇到兼容问题</td></tr><tr><td><strong>启动速度</strong></td><td>中等</td><td>快（轻量）</td></tr><tr><td><strong>适用场景</strong></td><td>- 稳定生产服务<br>- 需要完整依赖支持的项目<br>- 容器大小不是首要考虑</td><td>- 极致轻量化部署<br>- CI/CD 快速拉取镜像<br>- 云函数 / 微服务环境</td></tr><tr><td><strong>默认 PHP 官方镜像</strong></td><td><code>php:8.3-fpm-bullseye</code><br><code>php:8.3-cli-bullseye</code></td><td><code>php:8.3-fpm-alpine3.18</code><br><code>php:8.3-cli-alpine3.18</code></td></tr><tr><td><strong>维护便利性</strong></td><td>高，文档和社区案例多</td><td>中，需要熟悉 Alpine 生态</td></tr></tbody></table><ul><li>💡 选择建议</li></ul><ol><li><strong>优先稳定和兼容性</strong> → Debian 系列</li><li><strong>追求最小镜像体积 / 快速部署</strong> → Alpine 系列</li><li><strong>新项目建议</strong>：</li></ol><blockquote><p>不在乎镜像体积 → Debian bullseye 或 bookworm<br> 极致轻量 → Alpine 3.x</p></blockquote><ul><li>使用版本格式</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">alpine:</span>
<span class="line">php:&lt;php_version&gt;-&lt;sapi&gt;-&lt;alpine_version&gt;</span>
<span class="line"></span>
<span class="line">php:8.3-fpm-alpine3.17   # 基于 Alpine 3.17</span>
<span class="line">php:8.3-fpm-alpine3.18   # 基于 Alpine 3.18</span>
<span class="line">php:8.3-fpm-alpine3.19   # 基于 Alpine 3.19</span>
<span class="line"></span>
<span class="line">debian:</span>
<span class="line">php:&lt;php_version&gt;-&lt;sapi&gt;-&lt;debian_codename&gt;</span>
<span class="line"></span>
<span class="line">php:8.3-fpm-bullseye → PHP 8.3 + FPM + Debian 11 (bullseye)</span>
<span class="line">php:8.3-fpm-buster → PHP 8.3 + FPM + Debian 10 (buster)</span>
<span class="line">php:8.3-fpm-bookworm → PHP 8.3 + FPM + Debian 12 (bookworm)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h5 id="关于镜像的sapi" tabindex="-1"><a class="header-anchor" href="#关于镜像的sapi"><span>关于镜像的SAPI</span></a></h5><p>在 PHP 官方镜像里，<strong>CLI 和 FPM 是两种不同的 SAPI（Server API）</strong>：</p><h5 id="_1-sapi-的概念" tabindex="-1"><a class="header-anchor" href="#_1-sapi-的概念"><span>1&gt;. SAPI 的概念</span></a></h5><ul><li><strong>SAPI = Server API</strong>，表示 PHP 与外部环境交互的方式。</li><li>不同 SAPI 决定了 PHP 的运行模式和用途。</li></ul><h5 id="_2-常见-sapi-类型" tabindex="-1"><a class="header-anchor" href="#_2-常见-sapi-类型"><span>2&gt;. 常见 SAPI 类型</span></a></h5><p><strong>PHP 官方镜像 SAPI 对照图</strong>，把 CLI、FPM、Apache 的关系、用途和特点一目了然地展示出来：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+----------------------+---------------------+-------------------------+</span>
<span class="line">|      SAPI 类型       |   官方镜像标签      |        用途 / 特点       |</span>
<span class="line">+----------------------+---------------------+-------------------------+</span>
<span class="line">| CLI (Command Line)   | php:&lt;version&gt;-cli   | - 命令行脚本运行        |</span>
<span class="line">|                      |                     | - Cron / CI / 工具      |</span>
<span class="line">|                      |                     | - 无 Web 服务           |</span>
<span class="line">+----------------------+---------------------+-------------------------+</span>
<span class="line">| FPM (FastCGI)        | php:&lt;version&gt;-fpm   | - 配合 Nginx / Apache    |</span>
<span class="line">|                      |                     | - 高并发 Web 请求处理   |</span>
<span class="line">|                      |                     | - 多进程并发             |</span>
<span class="line">+----------------------+---------------------+-------------------------+</span>
<span class="line">| Apache Module        | php:&lt;version&gt;-apache| - PHP 内嵌 Apache        |</span>
<span class="line">|                      |                     | - 内置 Web 服务器        |</span>
<span class="line">|                      |                     | - 开发/小型部署           |</span>
<span class="line">+----------------------+---------------------+-------------------------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>说明</strong>：</p><ol><li><strong>SAPI（Server API）</strong> 决定了 PHP 与外部环境交互的方式，不同 SAPI 影响运行模式和用途。</li><li><strong>CLI</strong> → 只做脚本，不处理 Web 请求。</li><li><strong>FPM</strong> → 专为 Web 服务设计，配合反向代理服务器（Nginx/Apache）使用，支持高并发。</li><li><strong>Apache Module</strong> → PHP 直接嵌入 Apache，适合开发或小型部署，性能和扩展性略低于 FPM + Nginx。</li></ol><p>总结：</p><ul><li>PHP 官方镜像里 CLI 和 FPM 就是 <strong>两种不同 SAPI</strong>。</li><li>选择哪个 SAPI，取决于你是做 <strong>脚本/工具</strong> 还是 <strong>Web 服务</strong>。</li></ul>`,61)]))}const o=n(i,[["render",a],["__file","php之官方docker镜像介绍.html.vue"]]),p=JSON.parse('{"path":"/content/service/docker/php%E4%B9%8B%E5%AE%98%E6%96%B9docker%E9%95%9C%E5%83%8F%E4%BB%8B%E7%BB%8D.html","title":"php之官方docker镜像介绍","lang":"en-US","frontmatter":{"sidebar":false,"title":"php之官方docker镜像介绍","head":[["meta",{"name":"title","content":"php之官方docker镜像介绍"}],["meta",{"name":"description","content":"php之官方docker镜像介绍"}],["meta",{"name":"keywords","content":"docker,php"}],["meta",{"property":"og:title","content":"php之官方docker镜像介绍"}],["meta",{"property":"og:description","content":"php之官方docker镜像介绍"}]]},"headers":[],"git":{},"filePathRelative":"content/service/docker/php之官方docker镜像介绍.md"}');export{o as comp,p as data};
